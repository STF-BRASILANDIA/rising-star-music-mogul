<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
    <meta name="theme-color" content="#FFD700">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <!-- Meta tags específicas para prevenir seleção de texto no mobile -->
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="apple-touch-fullscreen" content="yes">
    <title>Rising Star: Music Mogul v2.0</title>
    <meta name="description" content="Simulação de carreira musical com IA dinâmica">
    <link rel="manifest" href="manifest.json">
    <!-- Ícones otimizados para melhor visualização na aba do navegador -->
    <link rel="shortcut icon" href="assets/icons/favicon.ico">
    <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/icons/favicon-96x96.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon.png">
    <link rel="icon" type="image/svg+xml" href="assets/icons/favicon.svg">
    <link rel="stylesheet" href="styles/main.css?v=3.0.0">
    <link rel="stylesheet" href="styles/components.css?v=3.0.0">
    <link rel="stylesheet" href="styles/responsive.css?v=3.0.0">
    <link rel="stylesheet" href="styles/notifications.css?v=1.0.0">
    <link rel="stylesheet" href="styles/game-hybrid.css?v=1.0.0">
    <link rel="stylesheet" href="styles/menu-navigation.css?v=1.0.0">
    <link rel="stylesheet" href="styles/modern-modals.css?v=1.0.0">
    <link rel="stylesheet" href="styles/pages-design.css?v=1.0.0">
    <link rel="stylesheet" href="styles/icons-fa.css?v=1.0.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- GUARDA FINAL ANTI-CURSOR - DEVE SER O ÚLTIMO CSS -->
    <link rel="stylesheet" href="styles/anti-cursor-final.css?v=1.0.0">
    
    <!-- NUCLEAR ANTI-CURSOR - ÚLTIMA LINHA DE DEFESA -->
    <link rel="stylesheet" href="styles/nuclear-anti-cursor.css?v=1.0.0">


</head>
<body class="menu-active">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen" style="display: block;">
        <div class="loading-content">
            <div class="logo">
                <h1>Rising Star</h1>
                <p>Music Mogul</p>
            </div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p class="loading-text">Carregando universo musical...</p>
            <!-- Temporary force-start button for debugging -->
            <div style="margin-top:18px; display:flex; justify-content:center;">
                <button id="forceStartBtn" style="padding:10px 18px; border-radius:8px; background:#ff6b35; color:#fff; border:none; font-weight:700; cursor:pointer;">Forçar Início</button>
            </div>
        </div>
    </div>

    <!-- Main Menu Screen -->
    <div id="mainMenu" class="screen main-menu" style="display: block;">
        <!-- Holofotes extras -->
        <div class="spotlight-right"></div>
        
        <div class="game-logo">
            <img src="https://i.imgur.com/bxSSzsJ.png" 
                 alt="Rising Star: Music Mogul" 
                 class="logo-image" 
                 referrerpolicy="no-referrer"
                 onerror="this.src='https://i.imgur.com/bxSSzsJ.png'; this.onerror=null;"
                 onload="console.log('✅ Logo carregado com sucesso!')">
        </div>

        <!-- Reflexo do chão -->
        <div class="floor-reflection"></div>

        <div class="menu-buttons">
            <div class="main-actions">
                <button class="menu-btn continue-game" id="continueGameBtn" style="display: none;">
                    <i class="fas fa-play"></i> Continuar Jogo
                </button>
                
                <button class="menu-btn new-game" id="newGameBtn">
                    <i class="fas fa-music"></i> Novo Jogo
                </button>

                <button class="menu-btn" id="loadGameBtn">
                    <i class="fas fa-folder-open"></i> Carregar Jogo
                </button>
            </div>

            <div class="secondary-actions">
                <button class="menu-btn" id="testDashboardBtn">
                    <i class="fas fa-gamepad"></i> Testar Dashboard
                </button>

                <button class="menu-btn" id="helpBtn">
                    <i class="fas fa-question-circle"></i> Como Jogar
                </button>

                <button class="menu-btn" id="creditsBtn">
                    <i class="fas fa-users"></i> Créditos
                </button>
            </div>
        </div>

        <div class="sync-status disconnected" id="syncStatus">
            <div class="status-dot"></div>
            <span id="statusText">Offline</span>
        </div>

        <div class="game-version">
            v1.0.0 Beta
        </div>
    </div>

    <!-- Sistema de Notificações GLOBAL -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- Character Creation Screen -->
    <div id="characterCreation" class="screen" style="display: none;">
        <div class="creation-container">
            <!-- Step 1: Profile (LAYOUT CORRIGIDO) -->
            <div id="profile-step" class="creation-step" style="display: flex; flex-direction: column; height: 100vh; max-height: 100vh; overflow: hidden; padding: 0; box-sizing: border-box;">
                <div class="step-header" style="flex-shrink: 0; padding: 16px 16px 8px; border-bottom: 1px solid rgba(255,255,255,0.1); position: relative;">
                    <button class="back-btn" id="profileBack" style="position: absolute; left: 16px; top: 16px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: #fff; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500; text-align: center; transition: all 0.3s ease; backdrop-filter: blur(5px);">Voltar</button>
                    <h1 class="step-title" style="margin: 0; font-size: 24px; font-weight: 700; color: #fff; text-align: center;">Perfil</h1>
                </div>

                <div class="profile-form" style="flex: 1; overflow-y: auto; overflow-x: hidden; padding: 16px; -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none;">
                    <!-- Nome do Personagem -->
                    <div class="form-section">
                        <label class="form-label">Nome do Personagem:</label>
                        <div class="name-inputs">
                            <input type="text" id="firstName" placeholder="Primeiro Nome" class="name-input" required>
                            <input type="text" id="lastName" placeholder="Sobrenome" class="name-input" required>
                        </div>
                    </div>

                    <!-- Nome Artístico (OBRIGATÓRIO) -->
                    <div class="form-section">
                        <label class="form-label">Nome Artístico:</label>
                        <input type="text" id="artistName" placeholder="Digite seu Nome Artístico" class="artist-input" required>
                    </div>

                    <!-- Localização -->
                    <div class="form-section">
                        <label class="form-label">Localização:</label>
                        <div class="location-selector">
                            <button class="nav-arrow left" id="locationPrev">‹</button>
                            <span class="location-display" id="locationDisplay">Estados Unidos</span>
                            <span class="counter">1/9</span>
                            <button class="nav-arrow right" id="locationNext">›</button>
                        </div>
                    </div>

                    <!-- Idade (card largo) -->
                    <div class="form-section">
                        <label class="form-label">Idade:</label>
                        <div class="age-selector">
                            <button class="nav-arrow left" id="agePrev">‹</button>
                            <span class="age-display" id="ageDisplay">18</span>
                            <button class="nav-arrow right" id="ageNext">›</button>
                        </div>
                    </div>

                    <!-- Sexo (card largo) -->
                    <div class="form-section">
                        <label class="form-label">Sexo:</label>
                        <div class="sex-buttons">
                            <button class="sex-btn active" data-sex="male">Masculino</button>
                            <button class="sex-btn" data-sex="female">Feminino</button>
                        </div>
                    </div>

                    <!-- Gênero Musical -->
                    <div class="form-section">
                        <label class="form-label">Gênero Musical:</label>
                        <select class="genre-select" id="genreSelect" required>
                            <option value="afrobeat">Afrobeat</option>
                            <option value="alternative-country">Alternative Country</option>
                            <option value="alternative-metal">Alternative Metal</option>
                            <option value="alternative-pop">Alternative Pop</option>
                            <option value="alternative-rap">Alternative Rap</option>
                            <option value="alternative-rock">Alternative Rock</option>
                            <option value="ambient">Ambient</option>
                            <option value="art-rock">Art Rock</option>
                            <option value="blues">Blues</option>
                            <option value="brazilian-funk">Brazilian Funk</option>
                            <option value="christian">Christian</option>
                            <option value="classical">Classical</option>
                            <option value="country">Country</option>
                            <option value="dance-pop">Dance Pop</option>
                            <option value="edm">EDM</option>
                            <option value="electronic">Electronic</option>
                            <option value="electronica">Electronica</option>
                            <option value="folk">Folk</option>
                            <option value="gangsta-rap">Gangsta Rap</option>
                            <option value="gospel">Gospel</option>
                            <option value="hard-rock">Hard Rock</option>
                            <option value="house">House</option>
                            <option value="indie-pop">Indie Pop</option>
                            <option value="indie-rock">Indie Rock</option>
                            <option value="jpop">J-Pop</option>
                            <option value="jazz">Jazz</option>
                            <option value="kpop">K-Pop</option>
                            <option value="latin-pop">Latin Pop</option>
                            <option value="latin-rap">Latin Rap</option>
                            <option value="metal">Metal</option>
                            <option value="pop">Pop</option>
                            <option value="pop-country">Pop Country</option>
                            <option value="pop-punk">Pop Punk</option>
                            <option value="pop-rap">Pop Rap</option>
                            <option value="pop-rnb">Pop/R&B</option>
                            <option value="progressive-rock">Progressive Rock</option>
                            <option value="punk-rock">Punk Rock</option>
                            <option value="rnb" selected>R&B</option>
                            <option value="rap">Rap</option>
                            <option value="reggae">Reggae</option>
                            <option value="rock">Rock</option>
                            <option value="soft-rock">Soft Rock</option>
                            <option value="soul">Soul</option>
                            <option value="techno">Techno</option>
                            <option value="teen-pop">Teen Pop</option>
                        </select>
                    </div>

                    <!-- Função/Papel -->
                    <div class="form-section">
                        <label class="form-label">Função:</label>
                        <div class="role-selector">
                            <button class="nav-arrow left" id="rolePrev">‹</button>
                            <span class="role-display" id="roleDisplay">Cantor(a)</span>
                            <span class="counter">1/6</span>
                            <button class="nav-arrow right" id="roleNext">›</button>
                        </div>
                    </div>

                    <!-- Nome da Banda (OPCIONAL) -->
                    <div class="form-section optional band-section">
                        <label class="form-label">Nome da Banda <span class="optional-text">(opcional)</span>:</label>
                        <input type="text" id="bandName" placeholder="Nome da Banda" class="band-input">
                    </div>
                </div>
                
                <!-- Footer FIXO -->
                <div class="bottom-section" style="flex-shrink: 0; padding: 16px; border-top: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.3);">
                    <button class="continue-btn" id="profileContinue" style="width: 100%; padding: 12px 24px; background: linear-gradient(135deg, #ffd700, #daa520); border: none; color: #000; font-weight: 600; border-radius: 6px; cursor: pointer; font-size: 16px; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);">Continuar</button>
                </div>
            </div>

            <!-- CSS para profile scroll -->
            <style>
                .profile-form::-webkit-scrollbar {
                    display: none !important;
                }
                
                /* Animação para o card de habilidades */
                @keyframes pulse {
                    0% { opacity: 0.3; transform: scale(1); }
                    50% { opacity: 0.5; transform: scale(1.05); }
                    100% { opacity: 0.3; transform: scale(1); }
                }
                
                /* Hover effect especial para o botão principal de habilidades */
                .skills-main-btn {
                    position: relative;
                    overflow: hidden;
                }
                
                .skills-main-btn::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
                    transition: left 0.5s ease;
                }
                
                .skills-main-btn:hover::before {
                    left: 100%;
                }
            </style>

            <!-- Step 2: Background Story (LAYOUT CORRIGIDO) -->
            <div id="background-step" class="creation-step" style="display: none; flex-direction: column; height: 100vh; max-height: 100vh; overflow: hidden; padding: 0; box-sizing: border-box;">
                <div class="step-header" style="flex-shrink: 0; padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <h1 class="step-title" style="margin: 0; font-size: 24px; font-weight: 700; color: #fff; text-align: center;">História de Fundo</h1>
                </div>

                <div class="profile-content" style="flex: 1; overflow-y: auto; overflow-x: hidden; padding: 16px; -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none;">
                    <!-- Seleção de História -->
                    <div class="form-section">
                        <label class="form-label">Selecionar História:</label>
                        <div class="background-selector">
                            <select class="background-dropdown" id="backgroundSelect">
                                <option value="">Escolha uma história...</option>
                                <option value="0">Best Friend</option>
                                <option value="1">Indie Darlings</option>
                                <option value="2">Crossover Star</option>
                                <option value="3">Up and Coming Band</option>
                                <option value="4">Solo</option>
                                <option value="5">Local Scene Hero</option>
                                <option value="6">Band Member</option>
                                <option value="7">Indie Label</option>
                                <option value="8">Recording Studio</option>
                            </select>
                        </div>
                    </div>

                    <!-- Descrição da História -->
                    <div class="form-section">
                        <div class="background-description" id="backgroundDescription">
                            <p>Você e seu melhor amigo decidiram tentar fazer sucesso na indústria musical. Vocês não têm certeza de como vai ser, mas já estão ouvindo coisas boas de amigos e família.</p>
                        </div>
                    </div>

                    <!-- Estatísticas -->
                    <div class="form-section">
                        <div class="background-stats">
                            <div class="stat-row">
                                <span class="stat-label">Starting Label</span>
                                <span class="stat-value" id="startingLabel">Unsigned</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label">Starting Home</span>
                                <span class="stat-value" id="startingHome">Loft</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label">Starting Cash</span>
                                <span class="stat-value" id="startingCash">$15,000</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer FIXO -->
                <div class="bottom-section background-buttons" style="flex-shrink: 0; padding: 16px; border-top: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; gap: 16px; background: rgba(0,0,0,0.3);">
                    <button class="back-btn" id="backgroundBack" style="flex: 1; padding: 12px 24px; background: linear-gradient(135deg, #666666, #444444); border: none; color: #fff; font-weight: 600; border-radius: 6px; cursor: pointer; font-size: 16px; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(102, 102, 102, 0.3);">Voltar</button>
                    <button class="continue-btn" id="backgroundContinue" style="flex: 1; padding: 12px 24px; background: linear-gradient(135deg, #ffd700, #daa520); border: none; color: #000; font-weight: 600; border-radius: 6px; cursor: pointer; font-size: 16px; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);">Continuar</button>
                </div>
            </div>

            <!-- CSS para background scroll -->
            <style>
                .profile-content::-webkit-scrollbar {
                    display: none !important;
                }
                
                /* CSS MOBILE TOUCH FIX */
                button, .sex-btn, .continue-btn, .back-btn, .skill-btn {
                    -webkit-touch-callout: none !important;
                    -webkit-user-select: none !important;
                    user-select: none !important;
                    -webkit-tap-highlight-color: transparent !important;
                    touch-action: manipulation !important;
                    cursor: pointer !important;
                }
                
                /* Efeitos de toque para mobile */
                button:active, .sex-btn:active, .continue-btn:active, .back-btn:active, .skill-btn:active {
                    transform: scale(0.98) !important;
                    transition: transform 0.1s ease !important;
                }
                
                /* Garantir que botões sejam clicáveis no mobile */
                @media (max-width: 768px) {
                    button, .sex-btn, .continue-btn, .back-btn, .skill-btn {
                        min-height: 44px !important;
                        min-width: 44px !important;
                        position: relative !important;
                        z-index: 10 !important;
                    }
                    
                    /* GitHub Pages mobile fix */
                    .menu-btn {
                        pointer-events: auto !important;
                        -webkit-user-select: none !important;
                        user-select: none !important;
                    }
                }
                
                /* GitHub Pages specific fixes */
                * {
                    -webkit-tap-highlight-color: rgba(0,0,0,0) !important;
                }
            </style>

            <!-- Step 3: Skills (LAYOUT SCROLL FIXO) -->
            <div id="skills-step" class="creation-step" style="display: none; flex-direction: column; height: 100vh; max-height: 100vh; overflow: hidden;">
                <div class="skills-container" style="display: flex; flex-direction: column; height: 100%; overflow: hidden;">
                    
                    <!-- Header FIXO -->
                    <div class="step-header" style="flex-shrink: 0; padding: 20px 16px 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <h1 class="step-title" style="margin: 0 0 8px; font-size: 24px; font-weight: 700; color: #fff; text-align: center;">Distribuir Habilidades</h1>
                        <div class="character-info-mini" style="display: flex; flex-direction: column; gap: 2px; font-size: 12px; color: rgba(255,255,255,0.7); text-align: center;">
                            <span id="skillsCharacterName">Novo Artista</span>
                            <span id="skillsCharacterDetails">Cantor(a) • R&B</span>
                        </div>
                    </div>

                    <!-- Content com layout fixo -->
                    <div class="skills-content" style="flex: 1; display: flex; flex-direction: column; overflow: hidden; padding: 0;">
                        
                        <!-- Pontos disponíveis - FIXO NO TOPO -->
                        <div class="points-section" style="flex-shrink: 0; padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <div class="points-card" style="background: rgba(224,123,229,0.1); border: 1px solid rgba(224,123,229,0.3); border-radius: 8px; padding: 16px; backdrop-filter: blur(10px); display: flex; justify-content: space-between; align-items: center;">
                                <span class="points-label" style="font-size: 14px; color: rgba(255,255,255,0.8); font-weight: 600;">Pontos Disponíveis</span>
                                <span class="points-value" id="availablePoints" style="font-size: 24px; font-weight: 700; color: #e07be5;">100</span>
                            </div>
                            <p class="points-info" style="font-size: 12px; color: rgba(255,255,255,0.6); margin: 8px 0 0; text-align: center;">Distribua seus pontos entre as habilidades artísticas</p>
                        </div>

                        <!-- CONTAINER SCROLLÁVEL INVISÍVEL PARA AS HABILIDADES -->
                        <div class="skills-scroll-container" style="flex: 1; overflow-y: auto; overflow-x: hidden; padding: 0 16px 16px; -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none;">
                            <!-- APENAS TALENTOS ARTÍSTICOS -->
                            <div class="skills-category">
                                <h3 class="category-title" style="font-size: 16px; color: #64a8ff; margin: 16px 0 12px; text-align: center;"><i class="fas fa-music"></i> TALENTOS ARTÍSTICOS</h3>
                                
                                <div class="skill-row" data-skill="vocals">
                                    <div class="skill-info">
                                        <span class="skill-name">VOCALS</span>
                                        <span class="skill-description">Qualidade vocal e técnica de canto</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">−</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>

                                <div class="skill-row" data-skill="songWriting">
                                    <div class="skill-info">
                                        <span class="skill-name">SONG WRITING</span>
                                        <span class="skill-description">Criação e composição de músicas</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">−</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>

                                <div class="skill-row" data-skill="rhythm">
                                    <div class="skill-info">
                                        <span class="skill-name">RHYTHM</span>
                                        <span class="skill-description">Senso de ritmo e timing musical</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">−</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>

                                <div class="skill-row" data-skill="charisma">
                                    <div class="skill-info">
                                        <span class="skill-name">CHARISMA</span>
                                        <span class="skill-description">Carisma e presença de palco</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">−</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>

                                <div class="skill-row" data-skill="virality">
                                    <div class="skill-info">
                                        <span class="skill-name">VIRALITY</span>
                                        <span class="skill-description">Capacidade de criar conteúdo viral</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">−</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>

                                <div class="skill-row" data-skill="videoDirecting">
                                    <div class="skill-info">
                                        <span class="skill-name">VIDEO DIRECTING</span>
                                        <span class="skill-description">Direção e produção de videoclipes</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">−</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Footer FIXO -->
                    <div class="bottom-section background-buttons" style="flex-shrink: 0; padding: 16px; border-top: 1px solid rgba(255,255,255,0.1); display: flex; gap: 16px; background: rgba(0,0,0,0.3);">
                        <button class="back-btn" onclick="window.characterCreator?.previousStep()" style="width: calc(50% - 8px); padding: 12px 24px; background: linear-gradient(135deg, #666666, #444444); border: none; color: #fff; font-weight: 600; border-radius: 6px; cursor: pointer; font-size: 16px; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(102, 102, 102, 0.3);">Voltar</button>
                        <button class="continue-btn" id="startGameBtn" onclick="window.characterCreator?.startGame()" style="width: calc(50% - 8px); padding: 12px 24px; background: linear-gradient(135deg, #ffd700, #daa520); border: none; color: #000; font-weight: 600; border-radius: 6px; cursor: pointer; font-size: 16px; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);">Começar Jogo</button>
                    </div>
                </div>
            </div>

            <!-- CSS para esconder scrollbar -->
            <style>
                .skills-scroll-container::-webkit-scrollbar {
                    display: none !important;
                }
                .skills-scroll-container {
                    scrollbar-width: none !important;
                    -ms-overflow-style: none !important;
                }
                
                /* CSS MOBILE TOUCH FIX PARA SKILLS */
                .skill-btn, .skill-btn.minus, .skill-btn.plus {
                    -webkit-touch-callout: none !important;
                    -webkit-user-select: none !important;
                    user-select: none !important;
                    -webkit-tap-highlight-color: transparent !important;
                    touch-action: manipulation !important;
                    cursor: pointer !important;
                    min-width: 44px !important;
                    min-height: 44px !important;
                    position: relative !important;
                    z-index: 10 !important;
                }
                
                .skill-btn:active {
                    transform: scale(0.95) !important;
                    transition: transform 0.1s ease !important;
                }
                
                /* Efeitos hover premium para botões */
                .back-btn:hover {
                    background: rgba(255,255,255,0.2) !important;
                    border-color: rgba(255,255,255,0.4) !important;
                    transform: translateY(-1px) !important;
                }
                
                .continue-btn:hover {
                    background: linear-gradient(135deg, #ffdd33, #cc8800) !important;
                    transform: translateY(-1px) !important;
                    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4) !important;
                }
                
                .back-btn:active, .continue-btn:active {
                    transform: translateY(0) !important;
                }
            </style>
        </div>
    </div>

    <!-- Game Interface (Dashboard Híbrido) -->
    <div id="gameInterface" class="screen" style="display: none;" data-guard="dashboard">
        <div class="app-shell hybrid">
            <aside class="side-panel" id="sideProfile">
                <div class="profile-header">
                    <div class="avatar-wrapper" id="sidebarAvatarWrapper">
                        <div class="new-avatar avatar-size-lg avatar-theme" id="newDesktopAvatar" title="Trocar Avatar">
                            <span class="icon icon-lg icon-primary"><i class="fas fa-user-circle"></i></span>
                        </div>
                        <button class="edit-avatar-btn" id="editAvatarBtn" title="Editar Avatar">
                            <i class="fas fa-edit"></i>
                        </button>
                        <input type="file" id="avatarFileInput" accept="image/*" style="display:none;" />
                    </div>
                    <div class="artist-block">
                        <h2 id="artistStageName">DaVinci</h2>
                        <p class="artist-sub" id="artistRoleGenre">Rapper • R&B</p>
                        <span class="record-company-label" id="recordCompany">Independent</span>
                        <span class="record-label fame-level-1" id="recordLabel" data-fame-level="1">Anônimo</span>
                    </div>
                </div>
                <div class="primary-stats">
                    <div class="p-stat stat-cash">
                        <span class="label icon-text">
                            <span class="icon icon-sm icon-success"><i class="fas fa-dollar-sign"></i></span>
                            Cash
                        </span>
                        <span class="val" id="statMoney">$0</span>
                    </div>
                    <div class="p-stat stat-fame">
                        <span class="label icon-text">
                            <span class="icon icon-sm icon-warning"><i class="fas fa-star"></i></span>
                            Fama
                        </span>
                        <span class="val" id="statFame">0</span>
                    </div>
                    <div class="p-stat stat-followers">
                        <span class="label icon-text">
                            <span class="icon icon-sm icon-info"><i class="fas fa-users"></i></span>
                            Seguidores
                        </span>
                        <span class="val" id="statListeners">0</span>
                    </div>
                    <div class="p-stat stat-hype">
                        <span class="label icon-text">
                            <span class="icon icon-sm icon-warning"><i class="fas fa-fire"></i></span>
                            Hype
                        </span>
                        <span class="val" id="statHype">0</span>
                    </div>
                    <div class="p-stat stat-level">
                        <span class="label icon-text">
                            <i class="fas fa-chart-line"></i> Nível
                        </span>
                        <span class="val" id="statLevel">1</span>
                    </div>
                    <div class="p-stat stat-energy">
                        <span class="label icon-text">
                            <span class="icon icon-sm icon-warning"><i class="fas fa-bolt"></i></span>
                            Energia
                        </span>
                        <span class="val" id="statEnergy">100</span>
                    </div>
                </div>
                <div class="collapse-toggle" id="collapseProfile">Recolher ▲</div>
            </aside>

            <div class="main-area">
                <!-- Card de Linha do Tempo -->
                <div class="time-card-container" style="padding: 16px; background: rgba(0,0,0,0.2); border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <div class="time-card" style="background: linear-gradient(135deg, #2a5298, #1e3a5f); padding: 16px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; color: #fff; box-shadow: 0 4px 15px rgba(42, 82, 152, 0.3);">
                        <div class="time-info">
                            <h3 style="margin: 0; font-size: 18px; font-weight: 600;">Semana 1 - Segunda-feira</h3>
                            <p style="margin: 4px 0 0; font-size: 14px; opacity: 0.8;">15 de Junho de 2024</p>
                        </div>
                        <button id="advanceTimeBtn" style="padding: 12px 24px; background: linear-gradient(135deg, #ffd700, #daa520); border: none; color: #000; font-weight: 600; border-radius: 8px; cursor: pointer; font-size: 16px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);">
                            End Week
                        </button>
                    </div>
                </div>

        <header class="top-bar" style="display: none;">
                    <div class="left">
                        <h1 class="view-title" id="currentViewTitle">Visão Geral</h1>
                        <div class="time-chip">
                            <span id="weekIndicator">Semana 1</span>
                            <span id="dayIndicator">Segunda</span>
                        </div>
                    </div>
                    <div class="right">
                        <div class="level-chip">
                            <span id="careerLevelLabel">Nível 1</span>
                            <div class="lvl-bar">
                                <div id="careerLevelFill" style="width:0%"></div>
                            </div>
                        </div>
                        <button class="settings-ingame-btn" id="openInGameSettings" title="Configurações" style="background:none;border:1px solid rgba(255,255,255,0.25);color:#fff;padding:6px 10px;border-radius:6px;cursor:pointer;">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button class="settings-ingame-btn" id="openNotifications" title="Notificações" style="background:none;border:1px solid rgba(255,255,255,0.25);color:#fff;padding:6px 10px;border-radius:6px;cursor:pointer;">
                            <i class="fas fa-bell"></i>
                        </button>
                        <!-- Botão Perfil removido: já existe aba dedicada -->
                    </div>
                </header>

                <!-- Perfil Inline Mobile -->
                <div class="inline-profile-bar" id="inlineProfileBar" style="display:none;">
                    <div class="avatar-wrapper">
                        <div class="new-avatar avatar-size-lg avatar-theme" id="newMobileAvatar" title="Trocar Avatar">
                            <span class="icon icon-lg icon-primary"><i class="fas fa-user-circle"></i></span>
                        </div>
                    </div>
                    <div class="inline-profile-meta">
                        <h2 id="artistStageNameInline" style="margin: 0; font-size: 18px; color: #fff;">DaVinci</h2>
                        <p id="artistRoleGenreInline" style="margin: 4px 0; font-size: 14px; color: #ccc;">Rapper • R&B</p>
                        <div class="labels-container">
                            <span class="record-company-label" id="recordCompanyInline">Independent</span>
                            <span class="record-label fame-level-1" id="recordLabelInline" data-fame-level="1">Anônimo</span>
                        </div>
                    </div>
                    <div class="inline-profile-stats">
                        <div class="p-stat stat-cash">
                            <span class="label icon-text">
                                <i class="fas fa-dollar-sign"></i>
                                Cash
                            </span>
                            <span class="val" id="statMoneyInline">$0</span>
                        </div>
                        <div class="p-stat stat-fame">
                            <span class="label icon-text">
                                <i class="fas fa-star"></i>
                                Fama
                            </span>
                            <span class="val" id="statFameInline">0</span>
                        </div>
                        <div class="p-stat stat-followers">
                            <span class="label icon-text">
                                <i class="fas fa-users"></i>
                                Seg.
                            </span>
                            <span class="val" id="statListenersInline">0</span>
                        </div>
                        <div class="p-stat stat-hype">
                            <span class="label icon-text">
                                <i class="fas fa-fire"></i>
                                Hype
                            </span>
                            <span class="val" id="statHypeInline">0</span>
                        </div>
                        <div class="p-stat stat-level">
                            <span class="label icon-text">
                                <i class="fas fa-chart-line"></i> Nível
                            </span>
                            <span class="val" id="statLevelInline">1</span>
                        </div>
                        <div class="p-stat stat-energy">
                            <span class="label icon-text">
                                <i class="fas fa-bolt"></i>
                                Energia
                            </span>
                            <span class="val" id="statEnergyInline">100</span>
                        </div>
                    </div>
                </div>

                <nav class="tab-nav" id="hubTabs">
                    <button class="tab-btn active" data-tab="profile">
                        <span class="tab-icon"><i class="fas fa-user"></i></span>
                        <span class="tab-label">Perfil</span>
                    </button>
                    <button class="tab-btn" data-tab="notifications" id="notificationsTabBtn">
                        <span class="tab-icon" style="position: relative;">
                            <i class="fas fa-bell"></i>
                            <span id="notificationBadge" class="notification-badge" style="display: none; position: absolute; top: -6px; right: -6px; background: #ff4444; color: white; font-size: 10px; font-weight: bold; padding: 2px 6px; border-radius: 50%; min-width: 16px; text-align: center; z-index: 10;">0</span>
                        </span>
                        <span class="tab-label">Notificações</span>
                    </button>
                    <button class="tab-btn" data-tab="store">
                        <span class="tab-icon"><i class="fas fa-shopping-cart"></i></span>
                        <span class="tab-label">Loja</span>
                    </button>
                    <button class="tab-btn" id="settingsModalBtn">
                        <span class="tab-icon"><i class="fas fa-cog"></i></span>
                        <span class="tab-label">Configurações</span>
                    </button>
                </nav>

                <main class="hub-panels" id="hubPanels">
                    <!-- Painel: Perfil Detalhado -->
                    <section class="hub-panel" id="panel-profile" data-tab="profile" style="display:block;">
                        <div class="profile-detailed" style="padding: 20px; max-width: 1200px; margin: 0 auto;">
                            <div class="profile-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                
                                <!-- Informações Básicas -->
                                <div class="info-card" style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 12px; color: #fff;">
                                    <h3 style="margin: 0 0 16px; font-size: 20px;">📋 Informações Básicas</h3>
                                    <div class="info-item"><strong>Nome:</strong> <span id="profileFullName">DaVinci Rodriguez</span></div>
                                    <div class="info-item"><strong>Nome Artístico:</strong> <span id="profileStageName">DaVinci</span></div>
                                    <div class="info-item"><strong>Gênero Musical:</strong> <span id="profileGenre">Rapper • R&B</span></div>
                                    <div class="info-item"><strong>Idade:</strong> <span id="profileAge">25 anos</span></div>
                                    <div class="info-item"><strong>Localização:</strong> <span id="profileLocation">Estados Unidos</span></div>
                                    <div class="info-item"><strong>Status:</strong> <span id="profileStatus">Artista Independente</span></div>
                                </div>

                                <!-- Card Destacado: Habilidades -->
                                <div class="skills-highlight-card" style="background: linear-gradient(135deg, #4facfe, #00f2fe); padding: 20px; border-radius: 12px; color: #fff; margin-bottom: 20px; position: relative; overflow: hidden;">
                                    <!-- Efeito de brilho de fundo -->
                                    <div style="position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%); animation: pulse 3s ease-in-out infinite;"></div>
                                    
                                    <div style="position: relative; z-index: 2;">
                                        <h3 style="margin: 0 0 12px; font-size: 20px; font-weight: 700;" class="icon-text">
                                            <i class="fas fa-star" style="color: #ffd700; font-size: 22px;"></i>
                                            Sistema de Habilidades
                                        </h3>
                                        <p style="margin: 0 0 16px; font-size: 14px; opacity: 0.9; line-height: 1.4;">
                                            Desenvolva suas habilidades artísticas e de negócios para dominar a indústria musical
                                        </p>
                                        
                                        <!-- Prévia das habilidades -->
                                        <div style="display: flex; gap: 12px; margin-bottom: 16px; flex-wrap: wrap;">
                                            <div style="display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; backdrop-filter: blur(10px);">
                                                <span>🎤</span> Vocals
                                            </div>
                                            <div style="display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; backdrop-filter: blur(10px);">
                                                <span>✍️</span> Songwriting
                                            </div>
                                            <div style="display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; backdrop-filter: blur(10px);">
                                                <span>💼</span> Marketing
                                            </div>
                                            <div style="display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; backdrop-filter: blur(10px);">
                                                <span>🤝</span> Negotiation
                                            </div>
                                        </div>
                                        
                                        <button class="skills-main-btn" id="openProfileSkillsBtn" style="width: 100%; padding: 14px 20px; background: rgba(255,255,255,0.25); border: 2px solid rgba(255,255,255,0.4); color: #fff; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 700; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 10px; backdrop-filter: blur(15px); text-transform: uppercase; letter-spacing: 0.5px;" onmouseover="this.style.background='rgba(255,255,255,0.35)'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(0,0,0,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.25)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                            <i class="fas fa-star" style="font-size: 18px;"></i>
                                            Gerenciar Habilidades
                                            <i class="fas fa-arrow-right" style="font-size: 14px;"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- Botões de Ação Rápida (outros) -->
                                <div class="actions-card" style="background: linear-gradient(135deg, #ff6b6b, #ee5a6f); padding: 20px; border-radius: 12px; color: #fff;">
                                    <h3 style="margin: 0 0 16px; font-size: 20px;" class="icon-text">
                                        <i class="fas fa-bolt"></i>
                                        Ações Rápidas
                                    </h3>
                                    <div class="action-buttons" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                        <button class="action-btn" id="openProfileNewsBtn" style="padding: 12px 16px; background: rgba(255,255,255,0.2); border: none; color: #fff; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; backdrop-filter: blur(10px);" onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(0)'">
                                            <i class="fas fa-newspaper"></i>
                                            Últimas Notícias
                                        </button>
                                        <button class="action-btn" id="openProfileContractsBtn" style="padding: 12px 16px; background: rgba(255,255,255,0.2); border: none; color: #fff; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; backdrop-filter: blur(10px);" onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(0)'">
                                            <i class="fas fa-handshake"></i>
                                            Contratos
                                        </button>
                                        <button class="action-btn" id="openProfileEventsBtn" style="padding: 12px 16px; background: rgba(255,255,255,0.2); border: none; color: #fff; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; backdrop-filter: blur(10px);" onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(0)'">
                                            <i class="fas fa-calendar-star"></i>
                                            Eventos
                                        </button>
                                        <button class="action-btn" id="openProfileAchievementsBtn" style="padding: 12px 16px; background: rgba(255,255,255,0.2); border: none; color: #fff; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; backdrop-filter: blur(10px);" onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(0)'">
                                            <i class="fas fa-trophy"></i>
                                            Conquistas
                                        </button>
                                        <button class="action-btn" id="openProfileStatsBtn" style="padding: 12px 16px; background: rgba(255,255,255,0.2); border: none; color: #fff; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; backdrop-filter: blur(10px);" onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(0)'">
                                            <i class="fas fa-chart-bar"></i>
                                            Estatísticas
                                        </button>
                                        <button class="action-btn" id="openProfileSettingsBtn" style="padding: 12px 16px; background: rgba(255,255,255,0.2); border: none; color: #fff; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; backdrop-filter: blur(10px);" onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(0)'">
                                            <i class="fas fa-user-cog"></i>
                                            Configurações
                                        </button>
                                    </div>
                                </div>

                                <!-- Status de Vida -->
                                <div class="life-status-card" style="background: linear-gradient(135deg, #a8edea, #fed6e3); padding: 20px; border-radius: 12px; color: #333;">
                                    <h3 style="margin: 0 0 16px; font-size: 20px;" class="icon-text">
                                        <i class="fas fa-heart"></i>
                                        Status de Vida
                                    </h3>
                                    <div class="status-list">
                                        <div class="status-item">
                                            <strong>HEALTH:</strong> 
                                            <span id="statusHealth" style="color: #28a745; font-weight: 600;">100%</span>
                                            <div class="status-bar" style="width: 100px; height: 8px; background: rgba(0,0,0,0.2); border-radius: 4px; margin-left: 8px; overflow: hidden;">
                                                <div style="width: 100%; height: 100%; background: linear-gradient(90deg, #28a745, #20c997);"></div>
                                            </div>
                                        </div>
                                        <div class="status-item">
                                            <strong>MOOD:</strong> 
                                            <span id="statusMood" style="color: #17a2b8; font-weight: 600;">😊 Feliz</span>
                                        </div>
                                        <div class="status-item">
                                            <strong>RELATIONSHIPS:</strong> 
                                            <span id="statusRelationships" style="color: #6f42c1; font-weight: 600;">💔 Solteiro</span>
                                        </div>
                                        <div class="status-item">
                                            <strong>RESIDENCE:</strong> 
                                            <span id="statusResidence" style="color: #fd7e14; font-weight: 600;">🏠 Apartamento</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Painel: Notificações (PADRÃO IGUAL PERFIL/LOJA/CONFIG) -->
                    <section class="hub-panel" id="panel-notifications" data-tab="notifications" style="display: none;">
                        <div class="notifications-detailed" style="padding: 20px; max-width: 1200px; margin: 0 auto;">
                            <!-- Header com título -->
                            <div class="notifications-header" style="margin-bottom: 24px; text-align: center;">
                                <h2 style="margin: 0 0 8px; color: #fff; font-size: 24px;" class="icon-text">
                                    <i class="fas fa-bell" style="color: #4facfe;"></i>
                                    Feed de Notificações
                                </h2>
                                <p style="margin: 0; color: rgba(255,255,255,0.7); font-size: 14px;">Últimas atualizações e eventos importantes</p>
                            </div>

                            <!-- Filtros -->
                            <div class="filter-section" style="margin-bottom: 20px;">
                                <div class="feed-filters" style="display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;">
                                    <button class="filter-tab active" data-filter="all" style="padding: 8px 16px; background: linear-gradient(135deg, #4facfe, #00f2fe); border: none; color: #fff; border-radius: 20px; cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.3s ease;">
                                        <i class="fas fa-th-large"></i> Todas
                                    </button>
                                    <button class="filter-tab" data-filter="news" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: none; color: #fff; border-radius: 20px; cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.3s ease;">
                                        <i class="fas fa-newspaper"></i> Notícias
                                    </button>
                                    <button class="filter-tab" data-filter="messages" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: none; color: #fff; border-radius: 20px; cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.3s ease;">
                                        <i class="fas fa-envelope"></i> Mensagens
                                    </button>
                                    <button class="filter-tab" data-filter="events" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: none; color: #fff; border-radius: 20px; cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.3s ease;">
                                        <i class="fas fa-calendar-alt"></i> Eventos
                                    </button>
                                    <button class="filter-tab" data-filter="achievements" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: none; color: #fff; border-radius: 20px; cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.3s ease;">
                                        <i class="fas fa-trophy"></i> Conquistas
                                    </button>
                                </div>
                            </div>

                            <!-- Grid de Notificações (estilo cards como no perfil) -->
                            <div class="notifications-grid" id="notificationFeedContent" style="display: grid; gap: 16px;">
                                <!-- Notificações serão inseridas dinamicamente aqui -->
                            </div>

                            <!-- Estado vazio -->
                            <div class="empty-state" id="emptyState" style="display: none; text-align: center; padding: 40px; color: rgba(255,255,255,0.6);">
                                <div class="empty-icon" style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">
                                    <i class="fas fa-bell-slash"></i>
                                </div>
                                <h3 style="margin: 0 0 8px; color: rgba(255,255,255,0.8);">Nenhuma notificação encontrada</h3>
                                <p style="margin: 0;">Quando houver novidades importantes, elas aparecerão aqui.</p>
                            </div>
                        </div>
                    </section>

                    <!-- Painel: Loja -->
                    <section class="hub-panel" id="panel-store" data-tab="store" style="display: none;">
                        <div class="store-container" style="padding: 20px; max-width: 1000px; margin: 0 auto;">
                            <h2 style="margin: 0 0 20px; color: #fff; text-align: center;" class="icon-text">
                                <i class="fas fa-store"></i>
                                Loja/Marketplace
                            </h2>
                            <div class="store-categories" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                                <div class="store-category" style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 12px; color: #fff; text-align: center;">
                                    <h3 class="icon-text">
                                        <i class="fas fa-microphone"></i>
                                        Equipamentos
                                    </h3>
                                    <p>Microfones, instrumentos e equipamentos de estúdio</p>
                                    <button style="padding: 8px 16px; background: #fff; color: #333; border: none; border-radius: 6px; cursor: pointer;">Ver Itens</button>
                                </div>
                                <div class="store-category" style="background: linear-gradient(135deg, #f093fb, #f5576c); padding: 20px; border-radius: 12px; color: #fff; text-align: center;">
                                    <h3 class="icon-text">
                                        <i class="fas fa-tshirt"></i>
                                        Roupas & Estilo
                                    </h3>
                                    <p>Roupas de palco e acessórios para performances</p>
                                    <button style="padding: 8px 16px; background: #fff; color: #333; border: none; border-radius: 6px; cursor: pointer;">Ver Itens</button>
                                </div>
                                <div class="store-category" style="background: linear-gradient(135deg, #4facfe, #00f2fe); padding: 20px; border-radius: 12px; color: #fff; text-align: center;">
                                    <h3 class="icon-text">
                                        <i class="fas fa-home"></i>
                                        Propriedades
                                    </h3>
                                    <p>Casas, estúdios e espaços para eventos</p>
                                    <button style="padding: 8px 16px; background: #fff; color: #333; border: none; border-radius: 6px; cursor: pointer;">Ver Itens</button>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>

                <footer class="mobile-bottom-nav" id="mobileNav">
                    <button data-view="home" class="m-btn active">
                        <span class="m-icon icon icon-md"><i class="fas fa-home"></i></span>
                        <span class="m-label">Home</span>
                    </button>
                    <button data-view="studio" class="m-btn">
                        <span class="m-icon icon icon-md"><i class="fas fa-music"></i></span>
                        <span class="m-label">Studio</span>
                    </button>
                    <button data-view="career" class="m-btn">
                        <span class="m-icon icon icon-md"><i class="fas fa-trophy"></i></span>
                        <span class="m-label">Career</span>
                    </button>
                    <button data-view="social" class="m-btn">
                        <span class="m-icon icon icon-md"><i class="fas fa-users"></i></span>
                        <span class="m-label">Social</span>
                    </button>
                    <button data-view="finance" class="m-btn">
                        <span class="m-icon icon icon-md"><i class="fas fa-dollar-sign"></i></span>
                        <span class="m-label">Finance</span>
                    </button>
                </footer>
            </div>
        </div>
        <div id="hubNotificationContainer" class="hub-toast-stack"></div>
    </div>

    <!-- Studio Page -->
    <div id="studioPage" class="screen" style="display: none;">
        <div class="page-container">
            <div class="page-content">
                <!-- Page Header -->
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-music"></i>
                        Studio
                    </h1>
                    <p class="page-subtitle">Crie suas músicas e gerencie sua produção musical</p>
                </div>

                <!-- Quick Stats -->
                <div class="stats-section">
                    <h3 class="stats-title">Status do Estúdio</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value">5</div>
                            <div class="stat-label">Músicas Gravadas</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">85%</div>
                            <div class="stat-label">Qualidade Média</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12h</div>
                            <div class="stat-label">Tempo no Estúdio</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">$2.5K</div>
                            <div class="stat-label">Gastos Mensais</div>
                        </div>
                    </div>
                </div>
                
                <!-- Main Features -->
                <div class="content-grid">
                    <div class="feature-card studio-card">
                        <div class="card-icon">
                            <i class="fas fa-record-vinyl"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-record-vinyl"></i>
                            Gravar Música
                        </h3>
                        <p class="card-description">Crie uma nova faixa musical com instrumentos de alta qualidade e tecnologia de ponta</p>
                        <button class="card-action">Iniciar Gravação</button>
                    </div>
                    
                    <div class="feature-card studio-card">
                        <div class="card-icon">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-microphone"></i>
                            Estúdio Vocal
                        </h3>
                        <p class="card-description">Grave vocais e harmonias com equipamentos profissionais de última geração</p>
                        <button class="card-action">Acessar Estúdio</button>
                    </div>
                    
                    <div class="feature-card studio-card">
                        <div class="card-icon">
                            <i class="fas fa-sliders-h"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-sliders-h"></i>
                            Mixagem
                        </h3>
                        <p class="card-description">Mixe e masterize suas faixas para obter o som perfeito</p>
                        <button class="card-action">Abrir Mixer</button>
                    </div>

                    <div class="feature-card studio-card">
                        <div class="card-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-users"></i>
                            Colaborações
                        </h3>
                        <p class="card-description">Trabalhe com outros artistas e produtores em projetos musicais</p>
                        <button class="card-action">Buscar Parceiros</button>
                    </div>

                    <div class="feature-card studio-card">
                        <div class="card-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-cogs"></i>
                            Equipamentos
                        </h3>
                        <p class="card-description">Gerencie e atualize seus equipamentos de estúdio</p>
                        <button class="card-action">Ver Equipamentos</button>
                    </div>

                    <div class="feature-card studio-card">
                        <div class="card-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-chart-bar"></i>
                            Analytics
                        </h3>
                        <p class="card-description">Analise o desempenho de suas produções musicais</p>
                        <button class="card-action">Ver Relatórios</button>
                    </div>
                </div>
            </div>
            
            <footer class="mobile-bottom-nav" id="studioMobileNav">
                <button data-view="home" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-home"></i></span>
                    <span class="m-label">Home</span>
                </button>
                <button data-view="studio" class="m-btn active">
                    <span class="m-icon icon icon-md"><i class="fas fa-music"></i></span>
                    <span class="m-label">Studio</span>
                </button>
                <button data-view="career" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-trophy"></i></span>
                    <span class="m-label">Career</span>
                </button>
                <button data-view="social" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-users"></i></span>
                    <span class="m-label">Social</span>
                </button>
                <button data-view="finance" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-dollar-sign"></i></span>
                    <span class="m-label">Finance</span>
                </button>
            </footer>
        </div>
    </div>

    <!-- Career Page -->
    <div id="careerPage" class="screen" style="display: none;">
        <div class="page-container">
            <div class="page-content">
                <!-- Page Header -->
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-trophy"></i>
                        Career
                    </h1>
                    <p class="page-subtitle">Acompanhe sua carreira e conquistas musicais</p>
                </div>

                <!-- Career Stats -->
                <div class="stats-section">
                    <h3 class="stats-title">Progresso da Carreira</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value">Level 8</div>
                            <div class="stat-label">Nível Artístico</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">15</div>
                            <div class="stat-label">Shows Realizados</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">2.5M</div>
                            <div class="stat-label">Streams Totais</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">87%</div>
                            <div class="stat-label">Taxa de Sucesso</div>
                        </div>
                    </div>
                </div>
                
                <!-- Career Features -->
                <div class="content-grid">
                    <div class="feature-card career-card">
                        <div class="card-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-chart-line"></i>
                            Estatísticas
                        </h3>
                        <p class="card-description">Visualize métricas detalhadas do seu progresso na carreira musical</p>
                        <button class="card-action">Ver Estatísticas</button>
                    </div>
                    
                    <div class="feature-card career-card">
                        <div class="card-icon">
                            <i class="fas fa-award"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-award"></i>
                            Conquistas
                        </h3>
                        <p class="card-description">Veja seus troféus, marcos alcançados e objetivos cumpridos</p>
                        <button class="card-action">Ver Conquistas</button>
                    </div>
                    
                    <div class="feature-card career-card">
                        <div class="card-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-calendar-alt"></i>
                            Agenda
                        </h3>
                        <p class="card-description">Gerencie eventos, shows, entrevistas e compromissos profissionais</p>
                        <button class="card-action">Ver Agenda</button>
                    </div>

                    <div class="feature-card career-card">
                        <div class="card-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-handshake"></i>
                            Contratos
                        </h3>
                        <p class="card-description">Gerencie contratos com gravadoras, patrocinadores e parceiros</p>
                        <button class="card-action">Ver Contratos</button>
                    </div>

                    <div class="feature-card career-card">
                        <div class="card-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-star"></i>
                            Habilidades
                        </h3>
                        <p class="card-description">Desenvolva suas habilidades musicais e artísticas</p>
                        <button class="card-action">Treinar Habilidades</button>
                    </div>

                    <div class="feature-card career-card">
                        <div class="card-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-bullseye"></i>
                            Objetivos
                        </h3>
                        <p class="card-description">Defina e acompanhe seus objetivos de carreira</p>
                        <button class="card-action">Gerenciar Objetivos</button>
                    </div>
                </div>
            </div>
            
            <footer class="mobile-bottom-nav" id="careerMobileNav">
                <button data-view="home" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-home"></i></span>
                    <span class="m-label">Home</span>
                </button>
                <button data-view="studio" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-music"></i></span>
                    <span class="m-label">Studio</span>
                </button>
                <button data-view="career" class="m-btn active">
                    <span class="m-icon icon icon-md"><i class="fas fa-trophy"></i></span>
                    <span class="m-label">Career</span>
                </button>
                <button data-view="social" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-users"></i></span>
                    <span class="m-label">Social</span>
                </button>
                <button data-view="finance" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-dollar-sign"></i></span>
                    <span class="m-label">Finance</span>
                </button>
            </footer>
        </div>
    </div>

    <!-- Social Page -->
    <div id="socialPage" class="screen" style="display: none;">
        <div class="page-container">
            <div class="page-content">
                <!-- Page Header -->
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-users"></i>
                        Social
                    </h1>
                    <p class="page-subtitle">Conecte-se com fãs e outros artistas</p>
                </div>

                <!-- Social Stats -->
                <div class="stats-section">
                    <h3 class="stats-title">Alcance Social</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value">125K</div>
                            <div class="stat-label">Seguidores</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">95%</div>
                            <div class="stat-label">Engajamento</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">850</div>
                            <div class="stat-label">Posts este Mês</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12</div>
                            <div class="stat-label">Colaborações Ativas</div>
                        </div>
                    </div>
                </div>
                
                <!-- Social Features -->
                <div class="content-grid">
                    <div class="feature-card social-card">
                        <div class="card-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-heart"></i>
                            Base de Fãs
                        </h3>
                        <p class="card-description">Interaja com sua base de fãs e acompanhe o crescimento da sua audiência</p>
                        <button class="card-action">Gerenciar Fãs</button>
                    </div>
                    
                    <div class="feature-card social-card">
                        <div class="card-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-handshake"></i>
                            Colaborações
                        </h3>
                        <p class="card-description">Encontre outros artistas para colaborar em projetos musicais</p>
                        <button class="card-action">Buscar Artistas</button>
                    </div>
                    
                    <div class="feature-card social-card">
                        <div class="card-icon">
                            <i class="fas fa-share-alt"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-share-alt"></i>
                            Redes Sociais
                        </h3>
                        <p class="card-description">Gerencie suas contas nas redes sociais e campanhas de marketing</p>
                        <button class="card-action">Gerenciar Redes</button>
                    </div>

                    <div class="feature-card social-card">
                        <div class="card-icon">
                            <i class="fas fa-microphone-alt"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-microphone-alt"></i>
                            Entrevistas
                        </h3>
                        <p class="card-description">Participe de entrevistas e podcasts para aumentar sua visibilidade</p>
                        <button class="card-action">Ver Convites</button>
                    </div>

                    <div class="feature-card social-card">
                        <div class="card-icon">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-bullhorn"></i>
                            Campanhas
                        </h3>
                        <p class="card-description">Crie e gerencie campanhas promocionais para seus lançamentos</p>
                        <button class="card-action">Criar Campanha</button>
                    </div>

                    <div class="feature-card social-card">
                        <div class="card-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-comments"></i>
                            Feedback
                        </h3>
                        <p class="card-description">Veja comentários e feedback dos fãs sobre suas músicas</p>
                        <button class="card-action">Ver Feedback</button>
                    </div>
                </div>
            </div>
            
            <footer class="mobile-bottom-nav" id="socialMobileNav">
                <button data-view="home" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-home"></i></span>
                    <span class="m-label">Home</span>
                </button>
                <button data-view="studio" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-music"></i></span>
                    <span class="m-label">Studio</span>
                </button>
                <button data-view="career" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-trophy"></i></span>
                    <span class="m-label">Career</span>
                </button>
                <button data-view="social" class="m-btn active">
                    <span class="m-icon icon icon-md"><i class="fas fa-users"></i></span>
                    <span class="m-label">Social</span>
                </button>
                <button data-view="finance" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-dollar-sign"></i></span>
                    <span class="m-label">Finance</span>
                </button>
            </footer>
        </div>
    </div>

    <!-- Finance Page -->
    <div id="financePage" class="screen" style="display: none;">
        <div class="page-container">
            <div class="page-content">
                <!-- Page Header -->
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-dollar-sign"></i>
                        Finance
                    </h1>
                    <p class="page-subtitle">Gerencie suas finanças e investimentos</p>
                </div>

                <!-- Financial Stats -->
                <div class="stats-section">
                    <h3 class="stats-title">Situação Financeira</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value">$125K</div>
                            <div class="stat-label">Patrimônio Total</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">$15K</div>
                            <div class="stat-label">Receita Mensal</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">$8.5K</div>
                            <div class="stat-label">Gastos Mensais</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">+23%</div>
                            <div class="stat-label">Crescimento</div>
                        </div>
                    </div>
                </div>
                
                <!-- Finance Features -->
                <div class="content-grid">
                    <div class="feature-card finance-card">
                        <div class="card-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-wallet"></i>
                            Receitas
                        </h3>
                        <p class="card-description">Acompanhe suas receitas de streams, shows, merchandising e royalties</p>
                        <button class="card-action">Ver Receitas</button>
                    </div>
                    
                    <div class="feature-card finance-card">
                        <div class="card-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-chart-pie"></i>
                            Despesas
                        </h3>
                        <p class="card-description">Controle seus gastos com equipamentos, marketing e produção</p>
                        <button class="card-action">Ver Despesas</button>
                    </div>
                    
                    <div class="feature-card finance-card">
                        <div class="card-icon">
                            <i class="fas fa-piggy-bank"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-piggy-bank"></i>
                            Investimentos
                        </h3>
                        <p class="card-description">Invista em equipamentos, marketing e desenvolvimento da carreira</p>
                        <button class="card-action">Investir</button>
                    </div>

                    <div class="feature-card finance-card">
                        <div class="card-icon">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-file-invoice-dollar"></i>
                            Contratos
                        </h3>
                        <p class="card-description">Gerencie contratos financeiros e acordos comerciais</p>
                        <button class="card-action">Ver Contratos</button>
                    </div>

                    <div class="feature-card finance-card">
                        <div class="card-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-chart-line"></i>
                            Relatórios
                        </h3>
                        <p class="card-description">Analise relatórios financeiros detalhados e projeções</p>
                        <button class="card-action">Ver Relatórios</button>
                    </div>

                    <div class="feature-card finance-card">
                        <div class="card-icon">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <h3 class="card-title">
                            <i class="fas fa-calculator"></i>
                            Impostos
                        </h3>
                        <p class="card-description">Gerencie obrigações fiscais e declarações de imposto</p>
                        <button class="card-action">Calcular Impostos</button>
                    </div>
                </div>
                
                <!-- 🧪 SEÇÃO DE TESTE DOS MODAIS DE NOTIFICAÇÕES (Temporária) -->
                <div style="margin: 40px 20px; padding: 24px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.2);">
                    <h3 style="color: #fff; margin: 0 0 16px; font-size: 18px; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-vial"></i> Testes do Sistema de Modais
                    </h3>
                    <p style="color: #ccc; font-size: 14px; margin: 0 0 20px;">Demonstração dos novos modais com glassmorphism + iOS aesthetic:</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                        <button onclick="notificationTestData.testNewsModal()" style="padding: 12px 16px; background: linear-gradient(135deg, #667eea, #764ba2); border: none; color: #fff; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-newspaper"></i> Teste Notícias
                        </button>
                        
                        <button onclick="notificationTestData.testMessageModal()" style="padding: 12px 16px; background: linear-gradient(135deg, #f093fb, #f5576c); border: none; color: #fff; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-envelope"></i> Teste Mensagens
                        </button>
                        
                        <button onclick="notificationTestData.testEventModal()" style="padding: 12px 16px; background: linear-gradient(135deg, #4facfe, #00f2fe); border: none; color: #fff; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-calendar-alt"></i> Teste Eventos
                        </button>
                        
                        <button onclick="notificationTestData.testAchievementModal()" style="padding: 12px 16px; background: linear-gradient(135deg, #43e97b, #38f9d7); border: none; color: #fff; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-trophy"></i> Teste Conquistas
                        </button>
                        
                        <button onclick="notificationTestData.testAllModals()" style="padding: 12px 16px; background: linear-gradient(135deg, #ffd700, #ff8c00); border: none; color: #000; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; grid-column: 1 / -1;">
                            <i class="fas fa-magic"></i> Testar Todos os Modais
                        </button>
                    </div>
                </div>
            </div>
            
            <footer class="mobile-bottom-nav" id="financeMobileNav">
                <button data-view="home" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-home"></i></span>
                    <span class="m-label">Home</span>
                </button>
                <button data-view="studio" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-music"></i></span>
                    <span class="m-label">Studio</span>
                </button>
                <button data-view="career" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-trophy"></i></span>
                    <span class="m-label">Career</span>
                </button>
                <button data-view="social" class="m-btn">
                    <span class="m-icon icon icon-md"><i class="fas fa-users"></i></span>
                    <span class="m-label">Social</span>
                </button>
                <button data-view="finance" class="m-btn active">
                    <span class="m-icon icon icon-md"><i class="fas fa-dollar-sign"></i></span>
                    <span class="m-label">Finance</span>
                </button>
            </footer>
        </div>
    </div>

    <script type="module" src="js/ui/game-hub.js"></script>
    <script type="module" src="js/main.js?v=1.5.0"></script>
    <script type="module" src="js/core/ai-simulation.js?v=1.3.5"></script>
    <script type="module" src="js/core/data-manager.js?v=1.3.5"></script>
    <script type="module" src="js/ui/interface-manager.js?v=1.3.5"></script>
    <script type="module" src="js/ui/main-menu.js?v=1.3.5"></script>
    
    <!-- 🎭 Modern Modal System -->
    <script src="js/ui/modal-system.js?v=1.0.0"></script>
    <script src="js/ui/notification-modals.js?v=1.0.0"></script>
    <script src="js/ui/notification-test-data.js?v=1.0.0"></script>
    
    <!-- Estilos adicionais para o novo dashboard -->
    <style>
        /* Estilos para o card de tempo */
        .time-card-container {
            background: rgba(0,0,0,0.2);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .time-card {
            transition: all 0.3s ease;
        }
        
        .time-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(42, 82, 152, 0.4);
        }
        
        /* Estilos para informações do perfil */
        .record-label {
            display: inline-block;
            font-size: 10px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 14px;
            margin: 8px 0 0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }

        /* Selo da Gravadora (separado do selo de fama) */
        .record-company-label {
            display: inline-block;
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: #fff;
            font-size: 10px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 14px;
            margin: 4px 0 2px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 6px rgba(0, 123, 255, 0.3);
            transition: all 0.3s ease;
        }

        /* Níveis de Fama - Sistema de Progressão */
        .fame-level-1 { /* Anônimo */
            background: linear-gradient(135deg, #6c757d, #495057) !important;
            color: #fff !important;
            box-shadow: 0 2px 8px rgba(108, 117, 125, 0.3) !important;
        }

        .fame-level-2 { /* Notável */
            background: linear-gradient(135deg, #28a745, #20c997) !important;
            color: #fff !important;
            box-shadow: 0 2px 8px rgba(40, 167, 69, 0.4) !important;
        }

        .fame-level-3 { /* Reconhecido */
            background: linear-gradient(135deg, #17a2b8, #6f42c1) !important;
            color: #fff !important;
            box-shadow: 0 2px 8px rgba(23, 162, 184, 0.4) !important;
        }

        .fame-level-4 { /* Renomado */
            background: linear-gradient(135deg, #fd7e14, #e83e8c) !important;
            color: #fff !important;
            box-shadow: 0 2px 8px rgba(253, 126, 20, 0.4) !important;
        }

        .fame-level-5 { /* Celebridade */
            background: linear-gradient(135deg, #ffd700, #ff6b35) !important;
            color: #000 !important;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.5) !important;
        }

        .fame-level-6 { /* Ícone */
            background: linear-gradient(135deg, #dc3545, #6f42c1) !important;
            color: #fff !important;
            box-shadow: 0 2px 8px rgba(220, 53, 69, 0.5) !important;
            animation: iconGlow 2s ease-in-out infinite alternate;
        }

        .fame-level-7 { /* Lenda Eterna */
            background: linear-gradient(135deg, #ff6b35, #f093fb, #f5576c, #4facfe, #00f2fe) !important;
            background-size: 300% 300% !important;
            color: #fff !important;
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.6) !important;
            animation: legendGlow 3s ease-in-out infinite;
        }

        @keyframes iconGlow {
            0% { box-shadow: 0 2px 8px rgba(220, 53, 69, 0.5) !important; }
            100% { box-shadow: 0 4px 16px rgba(220, 53, 69, 0.8) !important; }
        }

        @keyframes legendGlow {
            0% { 
                background-position: 0% 50%;
                box-shadow: 0 2px 8px rgba(255, 107, 53, 0.6) !important;
            }
            50% { 
                background-position: 100% 50%;
                box-shadow: 0 6px 20px rgba(255, 107, 53, 0.9) !important;
            }
            100% { 
                background-position: 0% 50%;
                box-shadow: 0 2px 8px rgba(255, 107, 53, 0.6) !important;
            }
        }
        
        .record-label:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }
        
        /* Garantir que record-label aparece no mobile */
        #recordLabelInline {
            display: inline-block !important;
            visibility: visible !important;
        }
        
        /* Estilos para habilidades e upgrades */
        .skill-item, .status-item, .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .upgrade-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .upgrade-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        /* Responsividade para o card de tempo */
        @media (max-width: 768px) {
            .time-card {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }
            
            .time-info {
                text-align: center;
            }
            
            #advanceTimeBtn {
                width: 100%;
            }
        }
        /* Ajuste especial mobile (ex: 430x932): manter horizontal e reduzir dimensões */
        @media (max-width: 500px) {
            .time-card {
                flex-direction: row !important;
                align-items: center !important;
                text-align: left !important;
                gap: 12px !important;
                padding: 12px 14px !important; /* menor altura */
            }
            .time-info { text-align: left !important; flex: 1 1 auto !important; }
            .time-card h3 { font-size: 16px !important; line-height: 1.2 !important; }
            .time-card p { font-size: 12px !important; margin-top: 2px !important; }
            #advanceTimeBtn {
                width: auto !important;
                padding: 10px 18px !important;
                font-size: 14px !important;
                white-space: nowrap !important;
                flex-shrink: 0 !important;
            }
        }
        /* Ultra compacto: telas muito estreitas ainda podem empilhar para não quebrar */
        @media (max-width: 350px) {
            .time-card { flex-direction: column !important; align-items: stretch !important; }
            #advanceTimeBtn { width: 100% !important; }
        }
        
        /* Avatar clicável */
        .avatar {
            transition: all 0.3s ease;
        }
        
        .avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        
        /* Notificações */
        .notification-item {
            transition: all 0.3s ease;
        }
        
        .notification-item:hover {
            transform: translateX(8px);
            background: rgba(255,255,255,0.15) !important;
        }
        
        /* ===== NOVO SISTEMA DE NOTIFICAÇÕES - ESTILO APPLE iOS/macOS ===== */
        .news-feed-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0;
            background: rgba(28, 28, 30, 0.92);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border-radius: 20px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                0 1px 0 rgba(255, 255, 255, 0.05) inset,
                0 0 0 1px rgba(255, 255, 255, 0.08);
            border: none;
            overflow: hidden;
            max-height: calc(100vh - 120px);
            display: flex;
            flex-direction: column;
        }

        .news-feed-header {
            background: linear-gradient(180deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            padding: 28px 32px 24px 32px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .header-title i {
            color: #007AFF;
            font-size: 26px;
            filter: drop-shadow(0 0 12px rgba(0, 122, 255, 0.4));
        }

        .header-title h2 {
            margin: 0;
            color: #FFFFFF;
            font-size: 32px;
            font-weight: 700;
            letter-spacing: -0.7px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
        }

        .unread-counter {
            background: linear-gradient(135deg, #FF3B30 0%, #FF6B6B 100%);
            color: white;
            padding: 5px 10px;
            border-radius: 14px;
            font-size: 13px;
            font-weight: 600;
            min-width: 22px;
            text-align: center;
            box-shadow: 
                0 2px 12px rgba(255, 59, 48, 0.4),
                0 1px 0 rgba(255, 255, 255, 0.25) inset;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .unread-counter.visible {
            opacity: 1;
            transform: scale(1);
        }

        .feed-filters {
            display: flex;
            gap: 6px;
            background: rgba(255, 255, 255, 0.06);
            padding: 6px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .filter-tab {
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.75);
            padding: 10px 18px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', Roboto, sans-serif;
        }

        .filter-tab:hover {
            background: rgba(255, 255, 255, 0.08);
            color: rgba(255, 255, 255, 0.95);
            transform: translateY(-1px);
        }

        .filter-tab.active {
            background: rgba(0, 122, 255, 0.9);
            color: white;
            box-shadow: 
                0 2px 12px rgba(0, 122, 255, 0.4),
                0 1px 0 rgba(255, 255, 255, 0.2) inset;
            transform: translateY(0);
        }

        .filter-tab i {
            font-size: 13px;
            opacity: 0.85;
        }

        .news-feed-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px 32px 32px 32px;
            -webkit-overflow-scrolling: touch;
        }

        .news-feed-content::-webkit-scrollbar {
            width: 4px;
        }

        .news-feed-content::-webkit-scrollbar-track {
            background: transparent;
        }

        .news-feed-content::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            transition: background 0.2s ease;
        }

        .news-feed-content::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.35);
        }

        .notification-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .notification-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.2) 50%, 
                transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .notification-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.18);
            transform: translateY(-2px) scale(1.01);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.25),
                0 1px 0 rgba(255, 255, 255, 0.1) inset;
        }

        .notification-card:hover::before {
            opacity: 1;
        }

        .notification-card.unread {
            background: rgba(0, 122, 255, 0.08);
            border-color: rgba(0, 122, 255, 0.2);
            box-shadow: 
                0 4px 20px rgba(0, 122, 255, 0.15),
                0 1px 0 rgba(255, 255, 255, 0.1) inset;
        }

        .notification-card.unread::after {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            width: 8px;
            height: 8px;
            background: #007AFF;
            border-radius: 50%;
            box-shadow: 0 0 8px rgba(0, 122, 255, 0.5);
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .notification-source {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', Roboto, sans-serif;
            font-weight: 500;
        }

        .source-icon {
            font-size: 16px;
            filter: brightness(1.2);
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 20px;
            height: 20px;
        }

        .source-icon img {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.1);
            padding: 2px;
        }

        .source-name {
            text-transform: none;
            letter-spacing: 0;
        }

        .notification-time {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            font-weight: 400;
        }

        .notification-title {
            margin: 0;
            color: #FFFFFF;
            font-size: 17px;
            font-weight: 600;
            line-height: 1.35;
            margin-bottom: 8px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            letter-spacing: -0.2px;
        }

        .notification-summary {
            margin: 0;
            color: rgba(255, 255, 255, 0.8);
            font-size: 15px;
            line-height: 1.4;
            margin-bottom: 16px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', Roboto, sans-serif;
        }

        .notification-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 16px;
        }

        .notification-action-btn {
            background: rgba(0, 122, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 122, 255, 0.3);
            color: #007AFF;
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', Roboto, sans-serif;
        }

        /* Impedir cursor de texto e seleção no painel de notificações (mobile/desktop) */
        #panel-notifications,
        #panel-notifications .notifications-detailed,
        #panel-notifications .news-feed-content,
        #panel-notifications .notification-card,
        #panel-notifications .notification-card *,
        #panel-notifications .empty-feed,
        #panel-notifications .empty-feed * {
            cursor: default !important;
            -webkit-user-select: none !important;
            user-select: none !important;
            -webkit-touch-callout: none !important;
            caret-color: transparent !important;
            -webkit-tap-highlight-color: transparent !important;
        }

        /* Elementos clicáveis no painel mantêm cursor de ação */
        #panel-notifications .notification-card,
        #panel-notifications .filter-tab,
        #panel-notifications .notification-action-btn {
            cursor: pointer !important;
        }

        /* Responsive Design para Notificações */
        @media (max-width: 768px) {
            #panel-notifications {
                padding: 0 !important;
                overflow: visible !important; /* Permitir scroll da página */
                -webkit-overflow-scrolling: touch;
            }

            /* Adicionar padding inferior para não ficar atrás do menu */
            #panel-notifications .notifications-detailed,
            #notificationFeedContent {
                padding-bottom: calc(var(--mobile-nav-h, 96px) + env(safe-area-inset-bottom, 0px) + 20px) !important;
            }
        }
        
        /* Badge de notificação na aba */
        .notification-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: #ff4444;
            color: white;
            font-size: 10px;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 50%;
            min-width: 16px;
            text-align: center;
            z-index: 10;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 68, 68, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 68, 68, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 68, 68, 0);
            }
        }
        
        /* Cards do perfil detalhado */
        .info-card, .stats-card, .skills-card, .business-skills-card, 
        .life-status-card, .achievements-card {
            transition: all 0.3s ease;
        }
        
        .info-card:hover, .stats-card:hover, .skills-card:hover, 
        .business-skills-card:hover, .life-status-card:hover, .achievements-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
    </style>
    <script>
    // Sincroniza altura do avatar à altura total do bloco (meta + stats) mantendo proporção quadrada
    (function syncAvatarHeight(){
        const bar = document.getElementById('inlineProfileBar');
        if(!bar) return;
        const avatar = bar.querySelector('.avatar-wrapper .avatar');
        const meta = bar.querySelector('.inline-profile-meta');
        const stats = bar.querySelector('.inline-profile-stats');
        if(!avatar || !meta || !stats) return;
        function adjust(){
            // Altura alvo dinâmica: maior entre meta e stats
            let target = Math.max(meta.offsetHeight, stats.offsetHeight);
            // Apenas limite mínimo para não ficar pequeno demais
            if (target < 60) target = 60;
            avatar.style.height = target + 'px';
            avatar.style.width = target + 'px';
        }
        const ro = new ResizeObserver(adjust);
        ro.observe(meta); ro.observe(stats); ro.observe(bar);
        window.addEventListener('orientationchange', ()=> setTimeout(adjust,120));
        window.addEventListener('resize', ()=> adjust());
        adjust();
    })();
    </script>
    
    <!-- Sidebar Card Style -->
    <style>
        .side-panel {
            margin: 16px 0 16px 16px !important;
            border-radius: 16px !important;
            background: linear-gradient(135deg, #2a2d3a, #1e2026) !important;
            border: 1px solid rgba(255,255,255,0.1) !important;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3) !important;
        }
        
        /* Sidebar Mobile - Grid estável: Avatar | Info | Stats (3x2) */
        .inline-profile-bar {
            margin: 16px !important;
            border-radius: 16px !important;
            background: linear-gradient(135deg, #2a2d3a, #1e2026) !important;
            border: 1px solid rgba(255,255,255,0.1) !important;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3) !important;
            padding: 14px 14px 14px 11px !important; /* 1px mais à esquerda */
            display: grid !important;
            grid-template-columns: auto minmax(100px, 140px) 1fr !important; /* reduz espaço reservado */
            column-gap: 10px !important; /* aproxima colunas */
            align-items: start !important;
            box-sizing: border-box !important;
            max-width: 100% !important;
        }
        .inline-profile-bar .avatar-wrapper { grid-column:1; grid-row:1 / span 2; }
    .inline-profile-bar .avatar-wrapper .avatar { width:64px !important; height:64px !important; transition:height .15s ease, width .15s ease; }
    .inline-profile-bar .inline-profile-meta { grid-column:2; grid-row:1 / span 2; display:flex !important; flex-direction:column !important; gap:4px !important; min-width:0 !important; max-width:160px !important; }
    .inline-profile-bar .inline-profile-meta h2 { margin:0 !important; font-size:clamp(15px, 2.9vw, 18px) !important; line-height:1.15 !important; overflow-wrap:anywhere !important; }
    .inline-profile-bar .inline-profile-meta p { margin:0 !important; font-size:clamp(11px, 2.2vw, 14px) !important; line-height:1.1 !important; overflow-wrap:anywhere !important; }
        .inline-profile-bar .inline-profile-meta .record-label { margin-top:4px !important; font-size:9px !important; padding:3px 7px !important; }
    .inline-profile-bar > .inline-profile-stats { grid-column:3; grid-row:1 / span 2; }

        /* Forçar distribuição horizontal: avatar | meta | stats */
    .inline-profile-bar > .inline-profile-meta { min-width: 100px !important; }

        .inline-profile-bar > .inline-profile-stats {
            margin-left: auto !important;
        }

        /* Garantir alinhamento topo e não empurrar stats para baixo */
        .inline-profile-bar .inline-profile-meta,
        .inline-profile-bar .inline-profile-stats {
            align-self: flex-start !important;
        }

        /* Avatar - lado esquerdo */
        .inline-profile-bar .avatar-wrapper {
            flex-shrink: 0 !important;
        }

        /* Nome e informações - meio */
        .inline-profile-bar .inline-profile-meta {
            flex: 1 !important;
            display: flex !important;
            flex-direction: column !important;
            gap: 4px !important;
        }

        .inline-profile-bar .inline-profile-meta h2 {
            margin: 0 !important;
            font-size: 18px !important;
            font-weight: 700 !important;
            color: #fff !important;
        }

        .inline-profile-bar .inline-profile-meta p {
            margin: 0 !important;
            font-size: 14px !important;
            color: rgba(255,255,255,0.8) !important;
        }

        .inline-profile-bar .inline-profile-meta .record-label {
            display: inline-block !important;
            font-size: 10px !important;
            font-weight: 600 !important;
            padding: 3px 8px !important;
            border-radius: 12px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            align-self: flex-start !important;
            margin-top: 4px !important;
        }

        .inline-profile-bar .inline-profile-meta .record-company-label {
            display: inline-block !important;
            background: linear-gradient(135deg, #007bff, #0056b3) !important;
            color: #fff !important;
            font-size: 10px !important;
            font-weight: 600 !important;
            padding: 3px 8px !important;
            border-radius: 12px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            box-shadow: 0 2px 6px rgba(0, 123, 255, 0.3) !important;
            align-self: flex-start !important;
            margin: 2px 0 !important;
        }

        .inline-profile-bar .inline-profile-meta .labels-container {
            display: flex !important;
            flex-direction: column !important;
            gap: 2px !important;
            margin-top: 4px !important;
        }

        /* Telas maiores que 430px - Selos lado a lado naturalmente */
        @media (min-width: 431px) {
            /* Grid dinâmico: avatar | perfil (cresce) | stats (empurrado) */
            .inline-profile-bar {
                grid-template-columns: auto auto 1fr !important; /* coluna do meio auto se ajusta ao conteúdo */
                column-gap: 14px !important;
                align-items: start !important;
            }

            /* Permite que o bloco de perfil expanda conforme os selos em linha */
            .inline-profile-bar .inline-profile-meta {
                max-width: none !important;
                position: static !important;
                overflow: visible !important;
                padding-right: 4px !important;
                display: flex !important;
                flex-direction: column !important;
            }
            
            .inline-profile-bar .inline-profile-meta .labels-container {
                flex-direction: row !important;
                gap: 6px !important;
                align-items: center !important;
                margin-top: 6px !important;
                flex-wrap: nowrap !important; /* mantém lado a lado */
                width: auto !important;
                white-space: nowrap !important;
            }
            
            .inline-profile-bar .inline-profile-meta .record-company-label,
            .inline-profile-bar .inline-profile-meta .record-label {
                margin: 0 !important;
                font-size: 9px !important;
                padding: 3px 8px !important;
                line-height: 1.1 !important;
                flex: 0 0 auto !important; /* não quebra e empurra stats */
            }

            /* Ajusta stats: recua e limita altura para alinhar verticalmente */
            .inline-profile-bar .inline-profile-stats {
                align-self: stretch !important;
                padding-left: 0 !important;
                min-width: 190px !important; /* garante espaço mínimo das stats */
            }

            /* Se largura ainda for limitada (<600px) reduzir tipografia para caber tudo */
            @media (min-width:431px) and (max-width:560px) {
                .inline-profile-bar { column-gap: 10px !important; }
                .inline-profile-bar .inline-profile-meta h2 { font-size: 14px !important; }
                .inline-profile-bar .inline-profile-meta p { font-size: 11px !important; }
                .inline-profile-bar .inline-profile-meta .record-company-label,
                .inline-profile-bar .inline-profile-meta .record-label { font-size: 8px !important; padding: 2px 6px !important; }
            }
        }

        /* Telas altas e largas: garantir selos lado a lado (sem quebra) */
        @media (min-width: 431px) and (min-height: 932px) {
            /* Apenas pequeno ajuste extra de folga vertical se a tela for alta */
            .inline-profile-bar .inline-profile-meta .labels-container { margin-top: 8px !important; }
        }

        /* Apenas telas pequenas - força coluna */
        @media (max-width: 430px) {
            .inline-profile-bar .inline-profile-meta .labels-container {
                flex-direction: column !important;
                gap: 2px !important;
            }
        }

        /* Stats 3x2 - lado direito alinhado */
        .inline-profile-stats {
            display: grid !important;
            grid-template-columns: repeat(3, minmax(0, 1fr)) !important; /* impede overflow horizontal */
            gap: 6px !important;
            width: 100% !important;
            margin: 0 !important;
            padding: 0 4px 0 0 !important; /* puxa levemente para esquerda */
        }

    .inline-profile-stats .p-stat { display:flex !important; flex-direction:column !important; align-items:center !important; text-align:center !important; gap:2px !important; padding:4px 2px !important; min-width:0 !important; box-sizing:border-box !important; }

        .inline-profile-stats .p-stat .label {
            font-size: 10px !important;
            color: rgba(255,255,255,0.6) !important;
            font-weight: 500 !important;
            line-height: 1 !important;
        }

        .inline-profile-stats .p-stat .val {
            font-size: 13px !important;
            color: #fff !important;
            font-weight: 700 !important;
            line-height: 1 !important;
        }

        /* Breakpoint até 640px mantém horizontal, ajusta apenas espaçamento */
        @media (max-width:640px) {
            .inline-profile-bar { grid-template-columns:auto minmax(115px,145px) 1fr !important; column-gap:8px !important; padding:12px 12px 12px 9px !important; }
            .inline-profile-bar .avatar-wrapper .avatar { width:60px !important; height:60px !important; }
            .inline-profile-stats { gap:5px !important; grid-template-columns:repeat(3, minmax(0,1fr)) !important; padding-right:2px !important; }
            .inline-profile-stats .p-stat { padding:3px 2px !important; min-width:0 !important; }
            .inline-profile-stats .p-stat .label { font-size:9px !important; }
            .inline-profile-stats .p-stat .val { font-size:12px !important; }
        }

        /* Ultra pequeno: <=360 empilha stats abaixo */
        @media (max-width:360px){
            .inline-profile-bar { grid-template-columns:auto 1fr !important; grid-auto-rows:auto !important; }
            .inline-profile-bar > .inline-profile-stats { grid-column:1 / -1; grid-row:3; margin-top:8px !important; grid-template-columns:repeat(3, minmax(0,1fr)) !important; }
        }

        /* Ajuste especial para aparelhos ~400-480px (ex: 430x932) manter layout horizontal */
        @media (min-width: 400px) and (max-width: 480px) {
            .inline-profile-bar { column-gap: 12px !important; padding: 12px 12px 12px 11px !important; }
            .inline-profile-bar .avatar-wrapper .avatar { width:60px !important; height:60px !important; }
            .inline-profile-bar .inline-profile-meta h2 { font-size:16px !important; }
            .inline-profile-bar .inline-profile-meta p { font-size:12px !important; }
            .inline-profile-bar > .inline-profile-stats { grid-template-columns: repeat(3, minmax(0, 1fr)) !important; gap:6px !important; }
            .inline-profile-bar .inline-profile-stats .p-stat { min-width:0 !important; padding:3px 4px !important; }
            .inline-profile-bar .inline-profile-stats .p-stat .label { font-size:9px !important; }
            .inline-profile-bar .inline-profile-stats .p-stat .val { font-size:12px !important; }
        }

        /* Desktop - manter sidebar principal e ocultar inline */
        @media (min-width: 1001px) {
            .inline-profile-bar {
                display: none !important;
            }
        }

        /* Mobile - ocultar sidebar principal e mostrar inline */
        @media (max-width: 1000px) {
            .side-panel { display: none !important; }
            .inline-profile-bar { display: flex !important; }
        }

        /* Desktop: normalizar tamanho visual dos selos (gravadora x fama) */
        @media (min-width:1001px) {
            .side-panel .artist-block .record-company-label,
            .side-panel .artist-block .record-label {
                display: inline-flex !important;
                align-items: center !important;
                font-size:10px !important;
                padding:4px 10px !important;
                line-height:1 !important;
                border-radius:14px !important;
                letter-spacing:.5px !important;
                font-weight:600 !important;
                text-transform:uppercase !important;
                height:auto !important;
                vertical-align:middle !important;
            }
            /* Ajuste de espaçamento entre eles */
            .side-panel .artist-block .record-company-label { margin-right:6px !important; }
        }

        /* OVERRIDES FINAIS: estabilizar layout dos selos */
        @media (min-width:431px) and (max-width:1000px) {
            /* Volta para grid fixo evitando alongar stats */
            .inline-profile-bar {
                display: grid !important;
                grid-template-columns: auto minmax(150px, 190px) 1fr !important;
                align-items: start !important;
            }
            .inline-profile-bar .inline-profile-meta {
                display:flex !important;
                flex-direction:column !important;
                max-width:190px !important;
            }
            /* Selos sempre em COLUNA (um abaixo do outro) nesta faixa para zero sobreposição */
            .inline-profile-bar .inline-profile-meta .labels-container {
                flex-direction: column !important;
                gap: 4px !important;
                align-items: flex-start !important;
                margin-top: 4px !important;
                width: auto !important;
                white-space: normal !important;
            }
            .inline-profile-bar .inline-profile-meta .record-company-label,
            .inline-profile-bar .inline-profile-meta .record-label {
                font-size: 10px !important;
                padding: 4px 9px !important;
                flex: 0 0 auto !important;
            }
        }

        /* Opcional: acima de 600px pode voltar lado a lado sem sobrepor */
        @media (min-width:600px) and (max-width:1000px) {
            .inline-profile-bar .inline-profile-meta .labels-container {
                flex-direction: row !important;
                gap: 8px !important;
            }
        }
    </style>
    
    <!-- Debug & In-Game Safe Area Handling -->
    <script>
        window.testDashboard = function() {
            console.log('🧪 Testando Dashboard...');
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('characterCreation').style.display = 'none';
            const dashboard = document.getElementById('gameInterface');
            if (dashboard) {
                dashboard.style.display = 'block';
                document.body.classList.add('in-game');
                if (typeof window.initGameHub === 'function') {
                    window.initGameHub();
                }
            }
        };
        console.log('🔧 Digite window.testDashboard() no console para testar o dashboard');

        // Patch para marcar quando jogo inicia e revelar controles in-game-only
        (function patchInit() {
            if (window.__safeAreaInitPatched) return;
            const hook = () => {
                if (typeof window.initGameHub === 'function' && !window.__safeAreaInitPatched) {
                    window.__safeAreaInitPatched = true;
                    const original = window.initGameHub;
                    window.initGameHub = function(...args) {
                        const r = original.apply(this, args);
                        document.body.classList.add('in-game');
                        document.querySelectorAll('.in-game-only').forEach(el => {
                            el.style.display = '';
                        });
                        return r;
                    };
                } else if (!window.__safeAreaInitPatched) {
                    setTimeout(hook, 200);
                }
            };
            hook();
        })();

        // Fechar modal ao clicar fora (overlay)
        document.addEventListener('click', (e) => {
            const anyOpen = document.querySelector('.modal.show');
            if (anyOpen && e.target.classList && e.target.classList.contains('modal')) {
                if (window.mainMenu && typeof window.mainMenu.hideSettings === 'function') {
                    window.mainMenu.hideSettings();
                } else {
                    anyOpen.classList.remove('show');
                    setTimeout(()=> anyOpen.style.display = 'none', 250);
                }
            }
        });
    </script>
    
    <!-- Initialize Character Creator globally -->
    <script type="module">
        // Debug information
        console.log('🌍 Environment Info:');
        console.log('- Hostname:', window.location.hostname);
        console.log('- Pathname:', window.location.pathname);
        console.log('- Full URL:', window.location.href);
        console.log('- User Agent:', navigator.userAgent);
        
        // GitHub Pages compatible import
        const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        const isGitHubPages = window.location.hostname.includes('github.io');
        
        let basePath = './';
        if (isGitHubPages) {
            basePath = '/rising-star-music-mogul/';
        }
        
        console.log('🔧 Base path determined:', basePath);
        console.log('📍 Is Local:', isLocal, '| Is GitHub Pages:', isGitHubPages);
        
        // Try multiple import strategies
        async function loadCharacterCreator() {
            const attempts = [
                `${basePath}js/ui/character-creator.js`,
                './js/ui/character-creator.js',
                'js/ui/character-creator.js'
            ];
            
            for (let i = 0; i < attempts.length; i++) {
                try {
                    console.log(`🔄 Attempt ${i + 1}: Loading from ${attempts[i]}`);
                    const module = await import(attempts[i]);
                    const { CharacterCreator } = module;
                    
                    console.log('✅ CharacterCreator loaded successfully!');
                    
                    // Initialize when DOM is ready
                    if (document.readyState === 'loading') {
                        document.addEventListener('DOMContentLoaded', initCharacterCreator);
                    } else {
                        initCharacterCreator();
                    }
                    
                    function initCharacterCreator() {
                        console.log('🎭 Initializing CharacterCreator...');
                        if (window.characterCreator) {
                            console.log('ℹ️ CharacterCreator already initialized - skipping duplicate init:', window.characterCreator);
                            return;
                        }

                        // Prefer passing existing game engine if available
                        try {
                            const engine = window.game || null;
                            window.characterCreator = new CharacterCreator(engine);
                            console.log('✅ Global CharacterCreator initialized:', window.characterCreator);

                            // Test if it's working
                            if (typeof window.characterCreator.show === 'function') {
                                console.log('✅ CharacterCreator methods available');
                            } else {
                                console.error('❌ CharacterCreator methods not available');
                            }
                        } catch (err) {
                            console.error('❌ Failed to initialize CharacterCreator:', err);
                        }
                    }
                    
                    return; // Success, exit function
                    
                } catch (error) {
                    console.warn(`❌ Attempt ${i + 1} failed:`, error.message);
                    if (i === attempts.length - 1) {
                        console.error('❌ All attempts failed to load CharacterCreator');
                        console.error('🔍 Final error:', error);
                    }
                }
            }
        }
        
        // Start loading
        loadCharacterCreator();
    </script>

    <script>
        // Force start button handler (debug)
        document.addEventListener('DOMContentLoaded', () => {
            const btn = document.getElementById('forceStartBtn');
            if (!btn) return;
            btn.addEventListener('click', () => {
                console.log('🛠️ Force Start button clicked');
                const ls = document.getElementById('loadingScreen');
                if (ls) ls.style.display = 'none';
                try {
                    if (window.game && typeof window.game.showMainMenu === 'function') {
                        window.game.showMainMenu();
                    } else {
                        const mm = document.getElementById('mainMenu');
                        if (mm) mm.style.display = 'block';
                    }
                } catch (err) {
                    console.error('❌ ForceStart error:', err);
                }
            });
        });
    </script>

        <!-- Dynamic VH fallback for mobile browsers (evita corte por barras de endereço) -->
        <script>
            (function() {
                function applyDynamicVH() {
                    const vh = window.innerHeight * 0.01;
                    document.documentElement.style.setProperty('--vh', vh + 'px');
                    const steps = document.querySelectorAll('#characterCreation .creation-step');
                    steps.forEach(step => {
                        // Usa a variável dinâmica; se não existir, fallback normal do navegador
                        step.style.height = 'calc(var(--vh, 1vh) * 100)';
                        step.style.maxHeight = 'calc(var(--vh, 1vh) * 100)';
                    });
                }

                let resizeTimeout;
                function schedule() {
                    clearTimeout(resizeTimeout);
                        resizeTimeout = setTimeout(applyDynamicVH, 60);
                }

                window.addEventListener('resize', schedule, { passive: true });
                window.addEventListener('orientationchange', () => setTimeout(applyDynamicVH, 120));
                document.addEventListener('visibilitychange', () => { if (!document.hidden) schedule(); });
                // Primeira aplicação assim que possível
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', applyDynamicVH);
                } else {
                    applyDynamicVH();
                }
            })();
        </script>
     
     <script>
        // Sistema de Progressão de Fama
        function updateFameLevel() {
            const fameStatElement = document.getElementById('statFame');
            const recordLabelElements = document.querySelectorAll('.record-label');
            
            if (!fameStatElement) return;
            
            let currentFame = 0;
            
            // Extrai o valor numérico da fama
            const fameText = fameStatElement.textContent;
            const fameMatch = fameText.match(/(\d+)/);
            if (fameMatch) {
                currentFame = parseInt(fameMatch[1]);
            }
            
            // Define os níveis de fama
            const fameLevels = [
                { min: 0, max: 10, level: 1, title: "Anônimo", description: "Artista desconhecido" },
                { min: 11, max: 50, level: 2, title: "Notável", description: "Começando a ser reconhecido" },
                { min: 51, max: 100, level: 3, title: "Reconhecido", description: "Artista emergente" },
                { min: 101, max: 500, level: 4, title: "Renomado", description: "Artista estabelecido" },
                { min: 501, max: 1000, level: 5, title: "Celebridade", description: "Estrela da música" },
                { min: 1001, max: 5000, level: 6, title: "Ícone", description: "Lenda viva" },
                { min: 5001, max: Infinity, level: 7, title: "Lenda Eterna", description: "Imortal da música" }
            ];
            
            // Encontra o nível atual
            const currentLevel = fameLevels.find(level => 
                currentFame >= level.min && currentFame <= level.max
            );
            
            if (currentLevel && recordLabelElements.length > 0) {
                recordLabelElements.forEach(element => {
                    // Remove todas as classes de nível anteriores
                    for (let i = 1; i <= 7; i++) {
                        element.classList.remove(`fame-level-${i}`);
                    }
                    
                    // Adiciona a nova classe de nível
                    element.classList.add(`fame-level-${currentLevel.level}`);
                    
                    // Atualiza o texto
                    element.textContent = currentLevel.title;
                    
                    // Adiciona tooltip com descrição
                    element.title = `${currentLevel.title} - ${currentLevel.description} (Fama: ${currentFame})`;
                });
                
                console.log(`🌟 Nível de Fama Atualizado: ${currentLevel.title} (Fama: ${currentFame})`);
            }
        }
        
        // Observer para monitorar mudanças na estatística de fama
        function initFameObserver() {
            const fameStatElement = document.getElementById('statFame');
            if (!fameStatElement) {
                setTimeout(initFameObserver, 1000);
                return;
            }
            
            // Atualiza nível inicial
            updateFameLevel();
            
            // Observa mudanças no conteúdo
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'childList' || mutation.type === 'characterData') {
                        updateFameLevel();
                    }
                });
            });
            
            observer.observe(fameStatElement, {
                childList: true,
                subtree: true,
                characterData: true
            });
            
            console.log('🎯 Sistema de Progressão de Fama inicializado');
        }
        
        // Inicializa quando o DOM estiver pronto
        document.addEventListener('DOMContentLoaded', initFameObserver);
        
        // Backup: também tenta inicializar após um delay
        setTimeout(initFameObserver, 2000);
        </script>
     
     <script>
        // Sistema de Navegação por Abas do Hub
        document.addEventListener('DOMContentLoaded', function() {
            const tabButtons = document.querySelectorAll('.tab-btn');
            const hubPanels = document.querySelectorAll('.hub-panel');
            
            console.log(`🔍 Sistema de abas encontrou: ${tabButtons.length} botões e ${hubPanels.length} painéis`);
            
            // Listar todos os botões e painéis encontrados
            tabButtons.forEach((btn, index) => {
                const tabName = btn.getAttribute('data-tab');
                console.log(`📱 Botão ${index + 1}: ${tabName}`, btn);
            });
            
            hubPanels.forEach((panel, index) => {
                const panelName = panel.getAttribute('data-tab');
                console.log(`🗂️ Painel ${index + 1}: ${panelName}`, panel);
            });
            
            // Função para alternar entre abas
            function switchTab(targetTab) {
                console.log(`🎯 Alternando para aba: ${targetTab}`);
                
                // Remove active de todos os botões
                tabButtons.forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Esconde todos os painéis
                hubPanels.forEach(panel => {
                    panel.style.display = 'none';
                });
                
                // Ativa o botão clicado
                const activeButton = document.querySelector(`.tab-btn[data-tab="${targetTab}"]`);
                if (activeButton) {
                    activeButton.classList.add('active');
                    console.log(`✅ Botão ${targetTab} ativado`);
                } else {
                    console.error(`❌ Botão ${targetTab} não encontrado`);
                }
                
                // Mostra o painel correspondente
                const activePanel = document.getElementById(`panel-${targetTab}`);
                if (activePanel) {
                    activePanel.style.display = 'block';
                    console.log(`✅ Painel panel-${targetTab} exibido`);
                } else {
                    console.error(`❌ Painel panel-${targetTab} não encontrado`);
                }
            }
            
            // Adicionar event listeners para os botões das abas
            tabButtons.forEach((button) => {
                const tabName = button.getAttribute('data-tab');
                console.log(`🔗 Adicionando listener para aba: ${tabName}`);
                
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log(`🖱️ Clique detectado na aba: ${tabName}`);
                    switchTab(tabName);
                });
            });
            
            // Garantir que a aba de perfil esteja ativa por padrão
            setTimeout(() => {
                const profileTab = document.querySelector('.tab-btn[data-tab="profile"]');
                if (profileTab && !profileTab.classList.contains('active')) {
                    console.log('🔄 Ativando aba de perfil por padrão');
                    switchTab('profile');
                }
                console.log('✅ Sistema de navegação por abas inicializado!');
            }, 100);
            
            // Teste manual via console
            window.testTab = function(tabName) {
                console.log(`🧪 Teste manual da aba: ${tabName}`);
                switchTab(tabName);
            };
            
            console.log('🔧 Digite window.testTab("profile") no console para testar');
        });
        </script>
     
     <script>
        // Sistema de Navegação Principal entre Páginas (Corrigido)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🧭 Sistema de navegação principal ativo...');
            
            // Elementos da navegação (apenas do gameInterface)
            const navigationButtons = document.querySelectorAll('#gameInterface .mobile-bottom-nav .m-btn[data-view]');
            const allScreens = document.querySelectorAll('.screen');
            
            console.log(`📱 Menu original com ${navigationButtons.length} botões funcionando`);
            
            // Função para alternar entre páginas principais
            function switchToPage(targetPage) {
                console.log(`🎯 Navegando para: ${targetPage}`);
                
                // Esconder todas as telas
                allScreens.forEach(screen => {
                    screen.style.display = 'none';
                });
                
                // Mostrar a tela correspondente
                let targetScreen;
                switch(targetPage) {
                    case 'home':
                        targetScreen = document.getElementById('gameInterface');
                        // Para Home: esconder todos os painéis e desativar todas as abas
                        setTimeout(() => {
                            const allPanels = document.querySelectorAll('#gameInterface .hub-panel');
                            const allTabBtns = document.querySelectorAll('#gameInterface .tab-btn');
                            allPanels.forEach(panel => panel.style.display = 'none');
                            allTabBtns.forEach(btn => btn.classList.remove('active'));
                            console.log('🏠 Home ativado - interface principal sem abas abertas');
                        }, 50);
                        break;
                    case 'studio':
                        targetScreen = document.getElementById('studioPage');
                        break;
                    case 'career':
                        targetScreen = document.getElementById('careerPage');
                        break;
                    case 'social':
                        targetScreen = document.getElementById('socialPage');
                        break;
                    case 'finance':
                        targetScreen = document.getElementById('financePage');
                        break;
                    default:
                        console.warn(`❌ Página ${targetPage} não encontrada`);
                        return;
                }
                
                if (targetScreen) {
                    targetScreen.style.display = 'block';
                    console.log(`✅ Página ${targetPage} exibida`);
                } else {
                    console.warn(`❌ Elemento da página ${targetPage} não encontrado`);
                }
                
                // Atualizar estado dos botões em TODOS os menus inferiores
                const allMobileNavs = document.querySelectorAll('.mobile-bottom-nav');
                allMobileNavs.forEach(nav => {
                    const buttons = nav.querySelectorAll('.m-btn[data-view]');
                    buttons.forEach(btn => {
                        btn.classList.remove('active');
                        if (btn.getAttribute('data-view') === targetPage) {
                            btn.classList.add('active');
                        }
                    });
                });
            }
            
            // Adicionar event listeners para TODOS os menus inferiores
            const allMobileNavs = document.querySelectorAll('.mobile-bottom-nav');
            allMobileNavs.forEach(nav => {
                const buttons = nav.querySelectorAll('.m-btn[data-view]');
                buttons.forEach(button => {
                    const viewName = button.getAttribute('data-view');
                    
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log(`🖱️ Clique em: ${viewName} (menu: ${nav.id})`);
                        switchToPage(viewName);
                    });
                });
            });
            
            // Função de teste
            window.testNavigation = function(pageName) {
                console.log(`🧪 Teste: navegando para ${pageName}`);
                switchToPage(pageName);
            };
            
            console.log('✅ Menu original restaurado e funcionando!');
            console.log('🎮 Use apenas o menu da Home para navegar');
        });
        </script>

    <script>
        // ========================================
        // SISTEMA DE FEED DE NOTIFICAÇÕES/EVENTOS
        // ========================================
        
        class NotificationFeedManager {
            constructor() {
                this.notifications = [];
                this.currentFilter = 'all';
                this.modal = null;
                this.init();
                
                // Gerar dados de exemplo na inicialização
                this.generateSampleData();
            }
            
            init() {
                // Configurar modal
                this.setupModal();
                
                // Configurar filtros
                this.setupFilters();
                
                // Event listeners
                this.setupEventListeners();
                
                // Atualizar indicador visual inicial
                this.updateUnreadIndicator();
                
                console.log('🔔 Sistema de Notificações inicializado');
                
                // Script para detectar altura do menu móvel e aplicar padding
                this.setupMobileNavPadding();
            }
            
            setupMobileNavPadding() {
                const mobileNav = document.querySelector('.mobile-bottom-nav');
                if (mobileNav) {
                    const navHeight = mobileNav.offsetHeight;
                    document.documentElement.style.setProperty('--mobile-nav-h', `${navHeight}px`);
                    console.log('📱 Altura do menu móvel detectada:', navHeight + 'px');
                }
                
                // Reaplicar quando necessário
                window.addEventListener('resize', () => this.setupMobileNavPadding());
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => this.setupMobileNavPadding(), 100);
                });
            }
            
            setupModal() {
                // Modal agora é gerenciado pelo iOSModalSystem
                console.log('Modal setup agora é gerenciado pelo sistema iOS');
            }
            
            setupFilters() {
                const filterBtns = document.querySelectorAll('.filter-tab');
                filterBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const filter = btn.dataset.filter;
                        this.setFilter(filter);
                        
                        // Atualizar UI dos filtros (estilo aba ativo)
                        filterBtns.forEach(b => {
                            b.classList.remove('active');
                            b.style.background = 'rgba(255,255,255,0.1)';
                        });
                        btn.classList.add('active');
                        btn.style.background = 'linear-gradient(135deg, #4facfe, #00f2fe)';
                    });
                });
            }
            
            setupEventListeners() {
                // Listener para quando a tab de notificações for aberta
                const notificationsTab = document.getElementById('notificationsTabBtn');
                if (notificationsTab) {
                    notificationsTab.addEventListener('click', () => {
                        setTimeout(() => {
                            this.render();
                            this.setupMobileNavPadding(); // Reaplicar padding
                        }, 100);
                    });
                }
                
                // Listener geral para qualquer botão que abra notificações
                document.addEventListener('click', (e) => {
                    if (e.target.closest('[data-tab="notifications"]')) {
                        setTimeout(() => this.setupMobileNavPadding(), 50);
                    }
                });
            }
            
            generateSampleData() {
                const sources = ['Billboard News', 'Pitchfork Reviews', 'Rolling Stone', 'Forbes Music Mogul', 'The Verge: Music Tech'];
                
                this.notifications = [
                    // NEWS - Notícias da Indústria (exato dos testes)
                    {
                        id: 1,
                        type: 'news',
                        source: 'Billboard News',
                        title: 'Streaming alcança números recordes em 2025',
                        summary: 'O streaming musical atingiu 2.1 trilhões de reproduções globalmente no primeiro semestre, representando um crescimento de 15% em relação ao ano anterior.',
                        timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000), // 2 horas atrás
                        isRead: false
                    },
                    {
                        id: 2,
                        type: 'news',
                        source: 'Forbes Music Mogul',
                        title: 'Artistas independentes faturam $4.2 bilhões em 2025',
                        summary: 'Relatório exclusivo mostra como músicos sem contratos com major labels estão dominando o mercado digital e construindo impérios financeiros próprios.',
                        timestamp: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000), // 1 dia atrás
                        isRead: true
                    },
                    
                    // MESSAGES - Mensagens de Gravadoras/Agentes (exato dos testes)
                    {
                        id: 3,
                        type: 'message',
                        source: 'Atlantic Records',
                        title: 'Proposta de Contrato - Oportunidade Exclusiva',
                        summary: 'Ficamos impressionados com seu trabalho recente e gostaríamos de discutir uma parceria estratégica. Nossa proposta inclui suporte completo para produção, marketing e distribuição mundial.',
                        timestamp: new Date(Date.now() - 30 * 60 * 1000), // 30 minutos atrás
                        isRead: false
                    },
                    {
                        id: 4,
                        type: 'message',
                        source: 'Sarah Mitchell - Artist Manager',
                        title: 'Feedback sobre Demo "Neon Lights"',
                        summary: 'Ouvi sua nova demo e acredito que tem potencial comercial incrível. Sugiro algumas mudanças na produção e podemos começar a preparar um plano de lançamento estratégico para Q4.',
                        timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000), // 2 horas atrás
                        isRead: true
                    },
                    
                    // EVENTS - Convites e Eventos (exato dos testes)
                    {
                        id: 5,
                        type: 'event',
                        source: 'Rock in Rio Productions',
                        title: 'Convite - Rock in Rio Festival 2025',
                        summary: 'Convite para se apresentar no maior festival de música da América Latina. Show de 45 minutos no Palco Mundo para uma audiência estimada de 100,000 pessoas.',
                        timestamp: new Date(Date.now() - 1 * 60 * 60 * 1000), // 1 hora atrás
                        isRead: false
                    },
                    {
                        id: 6,
                        type: 'event',
                        source: 'Premiere Classe Records',
                        title: 'Colaboração com DJ Snake',
                        summary: 'DJ Snake está procurando vocalists para seu próximo álbum. Sua voz foi especificamente solicitada para a faixa principal. Sessão de gravação agendada para próxima semana.',
                        timestamp: new Date(Date.now() - 3 * 60 * 60 * 1000), // 3 horas atrás
                        isRead: false
                    },
                    
                    // ACHIEVEMENTS - Conquistas (exato dos testes)
                    {
                        id: 7,
                        type: 'achievement',
                        source: 'CONQUISTA DESBLOQUEADA',
                        title: 'Seu Single Atingiu #1 na Billboard Hot 100!',
                        summary: 'Parabéns! "Midnight Vibes" acaba de alcançar o primeiro lugar na Billboard Hot 100, uma conquista histórica que marca sua entrada definitiva no mainstream musical.',
                        timestamp: new Date(Date.now() - 15 * 60 * 1000), // 15 minutos atrás
                        isRead: false
                    },
                    {
                        id: 8,
                        type: 'achievement',
                        source: 'CONQUISTA DESBLOQUEADA',
                        title: 'Certificação Platina Alcançada!',
                        summary: 'Seu álbum "Digital Dreams" foi oficialmente certificado Platina pela RIAA, com mais de 1 milhão de unidades vendidas nos Estados Unidos.',
                        timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000), // 2 horas atrás
                        isRead: false
                    }
                ];
                
                console.log('📊 Dados de exemplo gerados:', this.notifications.length, 'notificações');
            }
            
            setFilter(filter) {
                this.currentFilter = filter;
                this.render();
            }
            
            getFilteredNotifications() {
                if (this.currentFilter === 'all') {
                    return this.notifications;
                }
                
                const typeMap = {
                    'news': 'news',
                    'messages': 'message',
                    'events': 'event',
                    'achievements': 'achievement'
                };
                
                return this.notifications.filter(n => n.type === typeMap[this.currentFilter]);
            }
            
            updateUnreadIndicator() {
                const unreadCount = this.notifications.filter(n => !n.isRead).length;
                
                // Atualizar contador no painel
                const unreadCounter = document.getElementById('unreadCounter');
                if (unreadCounter) {
                    unreadCounter.textContent = unreadCount;
                    unreadCounter.classList.toggle('visible', unreadCount > 0);
                }
                
                // Atualizar badge na aba de navegação
                const notificationBadge = document.getElementById('notificationBadge');
                if (notificationBadge) {
                    notificationBadge.textContent = unreadCount;
                    notificationBadge.style.display = unreadCount > 0 ? 'block' : 'none';
                }
                
                console.log(`📊 Indicadores atualizados: ${unreadCount} não lidas`);
            }
            
            render() {
                const container = document.getElementById('notificationFeedContent');
                if (!container) return;
                
                const filtered = this.getFilteredNotifications();
                
                if (filtered.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.6); grid-column: 1 / -1;">
                            <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">
                                <i class="fas fa-bell-slash"></i>
                            </div>
                            <h3 style="margin: 0 0 8px; color: rgba(255,255,255,0.8);">Nenhuma notificação encontrada</h3>
                            <p style="margin: 0;">Não há itens para este filtro no momento.</p>
                        </div>
                    `;
                    return;
                }
                
                const html = filtered.map(notification => this.renderNotificationCard(notification)).join('');
                container.innerHTML = html;
                
                // Adicionar event listeners para os cards
                this.setupCardListeners();
            }
            
            renderNotificationCard(notification) {
                const timeAgo = this.formatTimeAgo(notification.timestamp);
                const source = notification.source || 'Sistema';
                
                // Mapear ícones para fontes reais (mantendo design atual)
                const sourceIcons = {
                    'Billboard News': 'https://logo.clearbit.com/billboard.com',
                    'Pitchfork Reviews': 'https://logo.clearbit.com/pitchfork.com',
                    'Rolling Stone': 'https://logo.clearbit.com/rollingstone.com',
                    'Variety Entertainment': 'https://logo.clearbit.com/variety.com',
                    'Music Business Worldwide': 'https://logo.clearbit.com/musicbusinessworldwide.com',
                    'Digital Music News': 'https://logo.clearbit.com/digitalmusicnews.com',
                    'Complex Media': 'https://logo.clearbit.com/complex.com',
                    'Grammy Awards': 'https://logo.clearbit.com/grammy.com',
                    'Spotify Updates': 'https://logo.clearbit.com/spotify.com',
                    'Apple Music': 'https://logo.clearbit.com/apple.com',
                    'YouTube Music': 'https://logo.clearbit.com/youtube.com',
                    'TikTok Trends': 'https://logo.clearbit.com/tiktok.com',
                    'Instagram': 'https://logo.clearbit.com/instagram.com',
                    'Twitter': 'https://logo.clearbit.com/twitter.com',
                    'Facebook': 'https://logo.clearbit.com/facebook.com',
                    'Universal Music Group': 'https://logo.clearbit.com/umusic.com',
                    'CAA (Creative Artists Agency)': 'https://logo.clearbit.com/caa.com',
                    'Rock in Rio Organization': 'https://logo.clearbit.com/rockinrio.com',
                    'Sistema do Jogo': 'https://logo.clearbit.com/google.com'
                };

                // Cores baseadas no tipo (igual ao Perfil/Loja)
                const typeColors = {
                    news: 'linear-gradient(135deg, #667eea, #764ba2)',
                    message: 'linear-gradient(135deg, #f093fb, #f5576c)', 
                    event: 'linear-gradient(135deg, #4facfe, #00f2fe)',
                    achievement: 'linear-gradient(135deg, #ffd700, #ff8c00)',
                    system: 'linear-gradient(135deg, #a8edea, #fed6e3)'
                };

                const bgColor = typeColors[notification.type] || typeColors.system;
                const iconUrl = sourceIcons[source] || sourceIcons['Sistema do Jogo'];

                return `
                    <div class="notification-card" data-id="${notification.id}" style="background: ${bgColor}; padding: 20px; border-radius: 12px; color: #fff; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden;">
                        <div class="notification-header" style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 12px;">
                            <div class="source-icon" style="width: 24px; height: 24px; border-radius: 6px; overflow: hidden; flex-shrink: 0; background: rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center;">
                                <img src="${iconUrl}" alt="${source}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                <i class="fas fa-bell" style="display: none; font-size: 12px; color: rgba(255,255,255,0.8);"></i>
                            </div>
                            <div class="notification-meta" style="flex: 1; min-width: 0;">
                                <div class="source-name" style="font-size: 12px; font-weight: 600; opacity: 0.9; margin-bottom: 2px;">${source}</div>
                                <div class="timestamp" style="font-size: 11px; opacity: 0.7;">${timeAgo}</div>
                            </div>
                            ${!notification.isRead ? '<div class="unread-dot" style="width: 8px; height: 8px; background: #fff; border-radius: 50%; opacity: 0.9;"></div>' : ''}
                        </div>
                        
                        <h3 class="notification-title" style="margin: 0 0 8px; font-size: 16px; font-weight: 700; line-height: 1.3;">${notification.title}</h3>
                        <p class="notification-summary" style="margin: 0 0 16px; font-size: 14px; opacity: 0.9; line-height: 1.4;">${notification.summary}</p>
                        
                        <!-- Botão de ação principal (estilo das outras abas) -->
                        <div class="notification-actions" style="display: flex; gap: 8px; justify-content: flex-end;">
                            <button class="action-btn" data-action="read-more" data-id="${notification.id}" style="padding: 8px 16px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: #fff; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.3s ease; backdrop-filter: blur(10px);">
                                <i class="fas fa-arrow-right"></i> Ler Mais
                            </button>
                        </div>
                        
                        <!-- Hover effect -->
                        <div class="notification-hover-overlay" style="position: absolute; inset: 0; background: rgba(255,255,255,0.1); opacity: 0; transition: opacity 0.3s ease; pointer-events: none;"></div>
                    </div>
                `;
            }
            
            setupCardListeners() {
                const actionBtns = document.querySelectorAll('.action-btn[data-action="read-more"]');
                actionBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const id = parseInt(btn.dataset.id);
                        this.openModal(id);
                    });
                });
                
                // REMOVIDO: Click no card inteiro (causa bug - só botões devem abrir modal)
                // Cards agora só respondem a hover, não a click
                const cards = document.querySelectorAll('.notification-card');
                cards.forEach(card => {
                    // Hover effect (mantido)
                    card.addEventListener('mouseenter', () => {
                        const overlay = card.querySelector('.notification-hover-overlay');
                        if (overlay) overlay.style.opacity = '1';
                        card.style.transform = 'translateY(-2px)';
                        card.style.boxShadow = '0 8px 25px rgba(0,0,0,0.2)';
                    });
                    
                    card.addEventListener('mouseleave', () => {
                        const overlay = card.querySelector('.notification-hover-overlay');
                        if (overlay) overlay.style.opacity = '0';
                        card.style.transform = 'translateY(0)';
                        card.style.boxShadow = 'none';
                    });
                });
            }
            
            openModal(notificationId) {
                const notification = this.notifications.find(n => n.id === notificationId);
                if (!notification) return;
                
                // Marcar como lida
                if (!notification.isRead) {
                    notification.isRead = true;
                    this.updateUnreadIndicator(); // Atualizar indicadores
                    this.render(); // Re-render para remover indicador de não lida
                }
                
                // Mapear tipo de notificação para modal específico
                if (window.notificationModals) {
                    this.openSpecificModal(notification);
                } else {
                    console.warn('notificationModals não encontrado; verifique a ordem de scripts.');
                }
            }
            
            openSpecificModal(notification) {
                // Mapeamento direto por ID para garantir o modal correto
                const modalMap = {
                    // NEWS
                    1: () => this.openNewsModal_Streaming(),
                    2: () => this.openNewsModal_Forbes(),
                    
                    // MESSAGES  
                    3: () => this.openMessageModal_Atlantic(),
                    4: () => this.openMessageModal_Manager(),
                    
                    // EVENTS
                    5: () => this.openEventModal_RockInRio(),
                    6: () => this.openEventModal_DJSnake(),
                    
                    // ACHIEVEMENTS
                    7: () => this.openAchievementModal_Billboard(),
                    8: () => this.openAchievementModal_Platina()
                };
                
                const modalFunction = modalMap[notification.id];
                if (modalFunction) {
                    modalFunction();
                } else {
                    // Fallback genérico
                    this.openNewsModal(notification);
                }
            }
            
            // MODAIS DE NOTÍCIAS (com botões corretos)
            openNewsModal_Streaming() {
                const newsData = {
                    id: 'news-001',
                    source: 'Billboard News',
                    title: 'Streaming alcança números recordes em 2025',
                    summary: 'O streaming musical atingiu 2.1 trilhões de reproduções globalmente no primeiro semestre, representando um crescimento de 15% em relação ao ano anterior.',
                    timestamp: Date.now() - (2 * 60 * 60 * 1000),
                    featured: true,
                    fullArticle: `
                        O mercado de streaming musical continua sua trajetória ascendente, com dados divulgados hoje mostrando que as plataformas digitais registraram 2.1 trilhões de reproduções no primeiro semestre de 2025.
                        
                        Este crescimento de 15% em relação ao mesmo período do ano anterior demonstra a consolidação do streaming como principal meio de consumo musical, superando inclusive as projeções mais otimistas da indústria.
                        
                        <h4>Principais Destaques:</h4>
                        <ul>
                            <li>Hip-hop lidera com 35% das reproduções totais</li>
                            <li>Pop mantém 28% do market share</li>
                            <li>Música latina cresce 40% comparado a 2024</li>
                            <li>Podcasts musicais aumentaram 65%</li>
                        </ul>
                        
                        Para artistas independentes, estes números representam oportunidades sem precedentes de alcançar audiências globais sem depender de grandes gravadoras.
                    `,
                    impact: {
                        fama: +5,
                        oportunidades: ['streaming_boost', 'label_interest']
                    }
                };
                window.notificationModals.openNewsModal(newsData);
            }
            
            openNewsModal_Forbes() {
                const newsData = {
                    id: 'news-003',
                    source: 'Forbes Music Mogul',
                    title: 'Artistas independentes faturam $4.2 bilhões em 2025',
                    summary: 'Relatório exclusivo mostra como músicos sem contratos com major labels estão dominando o mercado digital e construindo impérios financeiros próprios.',
                    timestamp: Date.now() - (1 * 24 * 60 * 60 * 1000),
                    featured: true,
                    fullArticle: `
                        O mercado de música independente atingiu a marca histórica de $4.2 bilhões em receitas durante o primeiro semestre de 2025, segundo dados exclusivos compilados pela Forbes.
                        
                        Este crescimento exponencial é alimentado por artistas que optaram por manter controle total sobre sua música, utilizando plataformas de distribuição digital e estratégias de marketing direto ao consumidor.
                        
                        <h4>Top 5 Estratégias de Sucesso:</h4>
                        <ol>
                            <li>Engajamento direto nas redes sociais</li>
                            <li>Parcerias com marcas alinhadas ao público</li>
                            <li>Merchandising exclusivo e limitado</li>
                            <li>Experiências virtuais personalizadas</li>
                            <li>Diversificação em múltiplas plataformas</li>
                        </ol>
                    `,
                    impact: {
                        motivacao: +10,
                        business_insights: true
                    }
                };
                window.notificationModals.openNewsModal(newsData);
            }
            
            // MODAIS DE MENSAGENS
            openMessageModal_Atlantic() {
                const messageData = {
                    id: 'msg-001',
                    sender: 'Atlantic Records',
                    senderType: 'Gravadora',
                    subject: 'Proposta de Contrato - Oportunidade Exclusiva',
                    message: 'Ficamos impressionados com seu trabalho recente e gostaríamos de discutir uma parceria estratégica. Nossa proposta inclui suporte completo para produção, marketing e distribuição mundial.',
                    timestamp: Date.now() - (30 * 60 * 1000),
                    urgent: true,
                    offer: {
                        royalties: 15,
                        advance: 250000,
                        duration: '3 anos + 2 opcionais'
                    },
                    actions: [
                        { action: 'accept', label: 'Aceitar Proposta', type: 'success', icon: 'check' },
                        { action: 'counter', label: 'Contra-Proposta', type: 'primary', icon: 'handshake' },
                        { action: 'decline', label: 'Recusar', type: 'danger', icon: 'times' },
                        { action: 'schedule', label: 'Agendar Reunião', type: 'secondary', icon: 'calendar' }
                    ]
                };
                window.notificationModals.openMessageModal(messageData);
            }
            
            openMessageModal_Manager() {
                const messageData = {
                    id: 'msg-002',
                    sender: 'Sarah Mitchell - Artist Manager',
                    senderType: 'Agente/Manager',
                    subject: 'Feedback sobre Demo "Neon Lights"',
                    message: 'Ouvi sua nova demo e acredito que tem potencial comercial incrível. Sugiro algumas mudanças na produção e podemos começar a preparar um plano de lançamento estratégico para Q4.',
                    timestamp: Date.now() - (2 * 60 * 60 * 1000),
                    urgent: false,
                    actions: [
                        { action: 'reply', label: 'Responder', type: 'primary', icon: 'reply' },
                        { action: 'schedule_call', label: 'Agendar Ligação', type: 'secondary', icon: 'phone' },
                        { action: 'request_details', label: 'Solicitar Detalhes', type: 'secondary', icon: 'info-circle' }
                    ]
                };
                window.notificationModals.openMessageModal(messageData);
            }
            
            // MODAIS DE EVENTOS
            openEventModal_RockInRio() {
                const eventData = {
                    id: 'event-001',
                    eventName: 'Rock in Rio Festival 2025',
                    organizer: 'Rock in Rio Productions',
                    description: 'Convite para se apresentar no maior festival de música da América Latina. Show de 45 minutos no Palco Mundo para uma audiência estimada de 100,000 pessoas.',
                    date: '15 de Setembro, 2025',
                    location: 'Rio de Janeiro, Brasil',
                    type: 'Festival Internacional',
                    payment: 180000,
                    timestamp: Date.now() - (1 * 60 * 60 * 1000),
                    requirements: [
                        'Apresentação de 45 minutos',
                        'Som próprio (será fornecido)',
                        'Disponibilidade para ensaio técnico no dia anterior',
                        'Presença em coletiva de imprensa'
                    ]
                };
                window.notificationModals.openEventModal(eventData);
            }
            
            openEventModal_DJSnake() {
                const eventData = {
                    id: 'event-003',
                    eventName: 'Colaboração com DJ Snake',
                    organizer: 'Premiere Classe Records',
                    description: 'DJ Snake está procurando vocalists para seu próximo álbum. Sua voz foi especificamente solicitada para a faixa principal. Sessão de gravação agendada para próxima semana.',
                    date: '20-22 de Setembro, 2025',
                    location: 'Abbey Road Studios, London',
                    type: 'Colaboração Musical',
                    payment: 75000,
                    timestamp: Date.now() - (3 * 60 * 60 * 1000),
                    requirements: [
                        'Disponibilidade por 3 dias consecutivos',
                        'Vocal range: A2 - E5',
                        'Experiência em música eletrônica (desejável)',
                        'Flexibilidade criativa para experimentação'
                    ]
                };
                window.notificationModals.openEventModal(eventData);
            }
            
            // MODAIS DE CONQUISTAS
            openAchievementModal_Billboard() {
                const achievementData = {
                    id: 'achievement-001',
                    title: 'Seu Single Atingiu #1 na Billboard Hot 100!',
                    description: 'Parabéns! "Midnight Vibes" acaba de alcançar o primeiro lugar na Billboard Hot 100, uma conquista histórica que marca sua entrada definitiva no mainstream musical.',
                    timestamp: Date.now() - (15 * 60 * 1000),
                    stats: {
                        'Streams': '50M+',
                        'Downloads': '2.1M',
                        'Radio Plays': '15.8K',
                        'Chart Position': '#1'
                    },
                    rewards: [
                        'Desbloqueado: Status "Chart Topper"',
                        'Bonus de Fama: +1000 pontos',
                        'Nova oportunidade: Tour Mundial disponível',
                        'Aumento de royalties: +5% em futuros contratos'
                    ]
                };
                window.notificationModals.openAchievementModal(achievementData);
            }
            
            openAchievementModal_Platina() {
                const achievementData = {
                    id: 'achievement-002',
                    title: 'Certificação Platina Alcançada!',
                    description: 'Seu álbum "Digital Dreams" foi oficialmente certificado Platina pela RIAA, com mais de 1 milhão de unidades vendidas nos Estados Unidos.',
                    timestamp: Date.now() - (2 * 60 * 60 * 1000),
                    stats: {
                        'Vendas US': '1.2M',
                        'Vendas Global': '3.8M',
                        'Tempo no Chart': '28 sem',
                        'Peak Position': '#3'
                    },
                    rewards: [
                        'Placa Platina desbloqueada',
                        'Bonus de prestígio: +500 pontos',
                        'Unlock: Estúdios premium disponíveis',
                        'Aumento base de fãs: +250,000'
                    ]
                };
                window.notificationModals.openAchievementModal(achievementData);
            }
            
            formatNotificationContent(notification) {
                let content = notification.fullText || notification.text || '';
                
                // Adicionar detalhes específicos baseado no tipo
                if (notification.type === 'chart_position') {
                    content += `<br><br><strong>📈 Impacto na Carreira:</strong><br>`;
                    content += `• Popularidade: +${notification.impact?.popularity || 10}<br>`;
                    content += `• Vendas: +${notification.impact?.sales || 5}%<br>`;
                    content += `• Engajamento: +${notification.impact?.engagement || 15}`;
                } else if (notification.type === 'achievement') {
                    content += `<br><br><strong>🏆 Conquista Desbloqueada!</strong><br>`;
                    content += notification.description || 'Nova conquista alcançada em sua carreira musical.';
                } else if (notification.type === 'event') {
                    content += `<br><br><strong>📅 Detalhes do Evento:</strong><br>`;
                    if (notification.eventDetails) {
                        content += `• Local: ${notification.eventDetails.venue || 'A definir'}<br>`;
                        content += `• Data: ${notification.eventDetails.date || 'Em breve'}<br>`;
                        content += `• Público esperado: ${notification.eventDetails.audience || 'Variável'}`;
                    }
                }
                
                return content;
            }
            
            formatTimestamp(timestamp) {
                if (!timestamp) return 'Agora';
                
                const now = Date.now();
                const diff = now - timestamp;
                const minutes = Math.floor(diff / 60000);
                const hours = Math.floor(diff / 3600000);
                const days = Math.floor(diff / 86400000);
                
                if (minutes < 1) return 'Agora';
                if (minutes < 60) return `${minutes}min atrás`;
                if (hours < 24) return `${hours}h atrás`;
                return `${days}d atrás`;
            }
            
            shareNotification(notification) {
                if (navigator.share) {
                    navigator.share({
                        title: notification.title,
                        text: notification.text,
                        url: window.location.href
                    });
                } else {
                    // Fallback para cópia
                    const text = `${notification.title}\n${notification.text}\n\n${window.location.href}`;
                    navigator.clipboard.writeText(text).then(() => {
                        window.ToastManager?.show('Link copiado para a área de transferência!', 'success');
                    });
                }
            }
            
            showToast(message, type = 'info') {
                // Criar toast simples
                const toast = document.createElement('div');
                toast.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${type === 'success' ? '#10B981' : type === 'error' ? '#EF4444' : '#8B5CF6'};
                    color: white;
                    padding: 12px 20px;
                    border-radius: 8px;
                    font-weight: 600;
                    z-index: 11000;
                    animation: slideInRight 0.3s ease;
                `;
                toast.textContent = message;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.animation = 'slideOutRight 0.3s ease';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }
            
            formatTimeAgo(date) {
                const now = new Date();
                const diff = Math.floor((now - date) / 1000);
                
                if (diff < 60) return 'Agora mesmo';
                if (diff < 3600) return `${Math.floor(diff / 60)}min atrás`;
                if (diff < 86400) return `${Math.floor(diff / 3600)}h atrás`;
                if (diff < 604800) return `${Math.floor(diff / 86400)}d atrás`;
                
                return date.toLocaleDateString('pt-BR');
            }
            
            formatFullDate(date) {
                return date.toLocaleString('pt-BR', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            
            // Método público para adicionar notificação
            addNotification(notification) {
                const newNotification = {
                    id: Date.now(),
                    timestamp: new Date(),
                    isRead: false,
                    ...notification
                };
                
                this.notifications.unshift(newNotification);
                
                // Atualizar indicadores visuais
                this.updateUnreadIndicator();
                
                // Re-render se a tab estiver ativa
                const activeTab = document.querySelector('.tab-btn.active')?.dataset.tab;
                if (activeTab === 'notifications') {
                    this.render();
                }
                
                return newNotification;
            }
        }
        
        // Inicializar sistema
        document.addEventListener('DOMContentLoaded', () => {
            window.notificationFeedManager = new NotificationFeedManager();
            
            // CSS para animações de toast
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOutRight {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            console.log('🔔 NotificationFeedManager inicializado globalmente');
        });
        </script>

    <!-- Utilitários Gerais -->
    <script src="js/utils/utils.js"></script>
    
    <!-- Sistema de Configuração Centralizado -->
    <script src="js/utils/config-manager.js"></script>
    
    <!-- Sistema de Debug e Logging -->
    <script src="js/utils/debug-manager.js"></script>
    
    <!-- Sistema Unificado de Toast/Notificações -->
    <script src="js/utils/toast-manager.js"></script>
    
    <script>
        // Guarda final: não permitir dashboard visível antes do jogo
        (function finalDashboardGuard(){
            const gi = document.getElementById('gameInterface');
            if (!gi) return;
            if (!window.game || window.game.gameState !== 'playing') {
                gi.style.display = 'none';
            }
            document.addEventListener('readystatechange', ()=>{
                if (!window.game || window.game.gameState !== 'playing') gi.style.display='none';
            });
        })();
        
        // CORREÇÃO MOBILE ANTI-CURSOR - Foco específico no problema mobile
        (function mobileAntiCursor(){
            console.log('📱 Mobile Anti-cursor ativo');
            
            // Detectar se é mobile
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                console.log('� Dispositivo mobile detectado - aplicando correções específicas');
                
                // Prevenir comportamentos de seleção específicos do mobile
                document.addEventListener('touchstart', function(e) {
                    const target = e.target;
                    if (target.tagName !== 'INPUT' && 
                        target.tagName !== 'TEXTAREA' && 
                        target.contentEditable !== 'true') {
                        
                        // Forçar propriedades anti-cursor
                        target.style.webkitUserSelect = 'none';
                        target.style.userSelect = 'none';
                        target.style.caretColor = 'transparent';
                        target.style.webkitTouchCallout = 'none';
                    }
                }, { passive: false });
                
                // Prevenir seleção de texto no mobile
                document.addEventListener('selectstart', function(e) {
                    if (e.target.tagName !== 'INPUT' && 
                        e.target.tagName !== 'TEXTAREA' && 
                        e.target.contentEditable !== 'true') {
                        e.preventDefault();
                        e.stopPropagation();
                        return false;
                    }
                }, { passive: false });
                
                // Aplicar CSS específico mobile via JavaScript
                const mobileStyle = document.createElement('style');
                mobileStyle.textContent = `
                    @media (max-width: 768px) {
                        * {
                            -webkit-user-select: none !important;
                            user-select: none !important;
                            caret-color: transparent !important;
                            -webkit-touch-callout: none !important;
                            -webkit-tap-highlight-color: transparent !important;
                        }
                        
                        input, textarea {
                            -webkit-user-select: text !important;
                            user-select: text !important;
                            caret-color: auto !important;
                        }
                    }
                `;
                document.head.appendChild(mobileStyle);
            }
        })();
        
        // 🎯 INICIALIZAÇÃO DOS BOTÕES DO PERFIL
        document.addEventListener('DOMContentLoaded', function() {
            // Aguardar carregamento dos modais
            setTimeout(() => {
                // Botão Habilidades
                const skillsBtn = document.getElementById('openProfileSkillsBtn');
                if (skillsBtn) {
                    skillsBtn.addEventListener('click', () => {
                        if (window.notificationModals) {
                            window.notificationModals.openSkillsModal();
                        }
                    });
                }

                // Botão Últimas Notícias
                const newsBtn = document.getElementById('openProfileNewsBtn');
                if (newsBtn) {
                    newsBtn.addEventListener('click', () => {
                        if (window.notificationModals) {
                            window.notificationModals.openNewsListModal();
                        }
                    });
                }

                // Botão Contratos
                const contractsBtn = document.getElementById('openProfileContractsBtn');
                if (contractsBtn) {
                    contractsBtn.addEventListener('click', () => {
                        if (window.notificationModals) {
                            window.notificationModals.openContractsListModal();
                        }
                    });
                }

                // Botão Eventos
                const eventsBtn = document.getElementById('openProfileEventsBtn');
                if (eventsBtn) {
                    eventsBtn.addEventListener('click', () => {
                        if (window.notificationModals) {
                            window.notificationModals.openEventsListModal();
                        }
                    });
                }

                // Botão Conquistas
                const achievementsBtn = document.getElementById('openProfileAchievementsBtn');
                if (achievementsBtn) {
                    achievementsBtn.addEventListener('click', () => {
                        if (window.notificationModals) {
                            window.notificationModals.openAchievementsListModal();
                        }
                    });
                }

                // Botão Estatísticas
                const statsBtn = document.getElementById('openProfileStatsBtn');
                if (statsBtn) {
                    statsBtn.addEventListener('click', () => {
                        if (window.notificationModals) {
                            window.notificationModals.openStatsModal();
                        }
                    });
                }

                // Botão Configurações
                const settingsBtn = document.getElementById('openProfileSettingsBtn');
                if (settingsBtn) {
                    settingsBtn.addEventListener('click', () => {
                        if (window.notificationModals) {
                            window.notificationModals.openProfileSettingsModal();
                        }
                    });
                }

                console.log('🎯 Botões do perfil inicializados');
            }, 1000); // Aguardar carregamento completo dos sistemas
        });

        // Event listeners para botões do toolbar
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                // Botão Configurações do Toolbar
                const toolbarSettingsBtn = document.getElementById('openInGameSettings');
                if (toolbarSettingsBtn) {
                    toolbarSettingsBtn.addEventListener('click', () => {
                        if (window.notificationModals) {
                            window.notificationModals.openProfileSettingsModal();
                        }
                    });
                }

                // Botão Notificações do Toolbar (se não estiver configurado)
                const toolbarNotificationsBtn = document.getElementById('openNotifications');
                if (toolbarNotificationsBtn) {
                    toolbarNotificationsBtn.addEventListener('click', () => {
                        // Aqui você pode adicionar a lógica para abrir o painel de notificações
                        console.log('🔔 Abrir painel de notificações');
                    });
                }

                // Botão Configurações do Toolbar (abre modal)
                const settingsModalBtn = document.getElementById('settingsModalBtn');
                if (settingsModalBtn) {
                    settingsModalBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('⚙️ Abrindo modal de configurações');
                        if (window.notificationModals) {
                            window.notificationModals.openProfileSettingsModal();
                        } else {
                            console.error('❌ NotificationModals não disponível');
                        }
                    });
                }

                console.log('🔧 Event listeners do toolbar configurados');
            }, 1100);
        });
        
        // GUARDA BÁSICO ANTI-CURSOR (reduzido)
        (function basicAntiCursor(){
            document.addEventListener('selectstart', function(e) {
                if (e.target.tagName !== 'INPUT' && 
                    e.target.tagName !== 'TEXTAREA' && 
                    e.target.contentEditable !== 'true') {
                    e.preventDefault();
                    return false;
                }
            });
        })();
    </script>
    </body>
</html>
