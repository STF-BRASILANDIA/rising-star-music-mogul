<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
    <meta name="theme-color" content="#FF6B35">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <title>Rising Star: Music Mogul v2.0</title>
    <meta name="description" content="Simula√ß√£o de carreira musical com IA din√¢mica">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="assets/icons/favicon.png">
    <link rel="apple-touch-icon" href="assets/icons/favicon.png">
    <link rel="stylesheet" href="styles/main.css?v=3.0.0">
    <link rel="stylesheet" href="styles/components.css?v=3.0.0">
    <link rel="stylesheet" href="styles/responsive.css?v=3.0.0">
    <link rel="stylesheet" href="styles/game-hybrid.css?v=1.0.0">
    <link rel="stylesheet" href="styles/menu-navigation.css?v=1.0.0">
</head>
<body class="menu-active">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen" style="display: block;">
        <div class="loading-content">
            <div class="logo">
                <h1>Rising Star</h1>
                <p>Music Mogul</p>
            </div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p class="loading-text">Carregando universo musical...</p>
            <!-- Temporary force-start button for debugging -->
            <div style="margin-top:18px; display:flex; justify-content:center;">
                <button id="forceStartBtn" style="padding:10px 18px; border-radius:8px; background:#ff6b35; color:#fff; border:none; font-weight:700; cursor:pointer;">For√ßar In√≠cio</button>
            </div>
        </div>
    </div>

    <!-- Main Menu Screen -->
    <div id="mainMenu" class="screen main-menu" style="display: block;">
        <!-- Holofotes extras -->
        <div class="spotlight-right"></div>
        
        <div class="game-logo">
            <img src="https://i.imgur.com/k2nahrL.png" 
                 alt="Rising Star: Music Mogul" 
                 class="logo-image" 
                 referrerpolicy="no-referrer"
                 onerror="this.src='https://imgur.com/k2nahrL.png'; this.onerror=null;"
                 onload="console.log('‚úÖ Logo carregado com sucesso!')">
        </div>

        <!-- Reflexo do ch√£o -->
        <div class="floor-reflection"></div>

        <div class="menu-buttons">
            <div class="main-actions">
                <button class="menu-btn new-game" id="newGameBtn">
                    üéµ Novo Jogo
                </button>

                <button class="menu-btn" id="loadGameBtn">
                    üíæ Carregar Jogo
                </button>
            </div>

            <div class="secondary-actions">
                <button class="menu-btn" id="testDashboardBtn">
                    üéÆ Testar Dashboard
                </button>

                <button class="menu-btn" id="settingsBtn">
                    ‚öôÔ∏è Configura√ß√µes
                </button>

                <button class="menu-btn" id="storageInfoBtn">
                    üíæ Armazenamento Local
                </button>

                <button class="menu-btn" id="helpBtn">
                    ‚ùì Como Jogar
                </button>

                <button class="menu-btn" id="creditsBtn">
                    üë• Cr√©ditos
                </button>
            </div>
        </div>

        <div class="sync-status disconnected" id="syncStatus">
            <div class="status-dot"></div>
            <span id="statusText">Offline</span>
        </div>

        <div class="game-version">
            v1.0.0 Beta
        </div>
    </div>

    <!-- Sistema de Notifica√ß√µes GLOBAL -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configura√ß√µes</h2>
                <button class="close-btn" id="closeSettingsBtn">√ó</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>Interface</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="animationsEnabled" checked>
                            Ativar Anima√ß√µes
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="notificationsEnabled" checked>
                            Notifica√ß√µes
                        </label>
                    </div>
                    <div class="setting-item">
                        <label for="uiScale">Tamanho da Interface</label>
                        <select id="uiScale">
                            <option value="0.8">Pequeno</option>
                            <option value="1.0" selected>Normal</option>
                            <option value="1.2">Grande</option>
                        </select>
                    </div>
                    <div class="setting-item in-game-only" style="display:none;">
                        <label for="safeAreaOffset">Margem Superior (Notch/Dynamic Island)</label>
                        <input type="range" id="safeAreaOffset" min="0" max="80" step="4" value="0" oninput="document.getElementById('safeAreaValue').textContent=this.value + 'px'">
                        <div style="font-size:12px; opacity:.7; display:flex; justify-content:space-between; margin-top:2px;">
                            <span>Ajuste se a c√¢mera cobrir elementos</span>
                            <span id="safeAreaValue">0px</span>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Jogo</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="autoSaveEnabled" checked>
                            Salvamento Autom√°tico
                        </label>
                    </div>
                    <div class="setting-item">
                        <label for="autoSaveInterval">Intervalo de Auto-Save</label>
                        <select id="autoSaveInterval">
                            <option value="1">1 minuto</option>
                            <option value="2" selected>2 minutos</option>
                            <option value="5">5 minutos</option>
                            <option value="10">10 minutos</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="fastModeEnabled">
                            Modo R√°pido (acelera tempo do jogo)
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Dados</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="cloudSyncEnabled">
                            Sincroniza√ß√£o na Nuvem (futuro)
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="analyticsEnabled" checked>
                            Permitir Estat√≠sticas An√¥nimas
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn secondary" id="resetSettingsBtn">Restaurar Padr√µes</button>
                <button class="btn primary" id="saveSettingsBtn">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Load Game Modal -->
    <div id="loadGameModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Carregar Jogo</h2>
                <button class="close-btn" id="closeLoadGameBtn">√ó</button>
            </div>
            <div class="modal-body">
                <div class="saves-container" id="savesContainer">
                    <!-- Saves will be populated by JS -->
                </div>
                <div class="empty-saves" id="emptySaves" style="display: none;">
                    <p>Nenhum jogo salvo encontrado.</p>
                    <p>Comece um novo jogo para criar seu primeiro save!</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn secondary" id="closeLoadGameFooterBtn">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Como Jogar</h2>
                <button class="close-btn" id="closeHelpBtn">√ó</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3>üéØ Objetivo do Jogo</h3>
                    <p>Torne-se uma estrela da m√∫sica! Comece como um artista desconhecido e construa seu imp√©rio musical atrav√©s de decis√µes estrat√©gicas, criatividade e networking.</p>
                </div>

                <div class="help-section">
                    <h3>üéµ Criando M√∫sicas</h3>
                    <ul>
                        <li><strong>Est√∫dio:</strong> Grave suas faixas no est√∫dio</li>
                        <li><strong>Qualidade:</strong> Invista em equipamentos melhores para maior qualidade</li>
                        <li><strong>G√™neros:</strong> Experimente diferentes g√™neros musicais</li>
                        <li><strong>Colabora√ß√µes:</strong> Trabalhe com outros artistas para expandir seu alcance</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üí∞ Gerenciamento Financeiro</h3>
                    <ul>
                        <li><strong>Receitas:</strong> Ganhe dinheiro atrav√©s de streams, vendas e shows</li>
                        <li><strong>Investimentos:</strong> Gaste sabiamente em marketing e equipamentos</li>
                        <li><strong>Contratos:</strong> Negocie contratos vantajosos com gravadoras</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>‚≠ê Construindo Fama</h3>
                    <ul>
                        <li><strong>Marketing:</strong> Promova suas m√∫sicas nas redes sociais</li>
                        <li><strong>Shows:</strong> Fa√ßa apresenta√ß√µes para ganhar f√£s</li>
                        <li><strong>M√≠dia:</strong> Gerencie sua imagem p√∫blica</li>
                        <li><strong>Tend√™ncias:</strong> Acompanhe e adapte-se √†s tend√™ncias musicais</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üéÆ Dicas para Iniciantes</h3>
                    <ul>
                        <li>Comece focando em um g√™nero musical espec√≠fico</li>
                        <li>Invista em equipamentos b√°sicos antes de gastar com marketing</li>
                        <li>Observe as tend√™ncias do mercado para criar m√∫sicas populares</li>
                        <li>Construa relacionamentos com outros artistas e produtores</li>
                        <li>Salve seu progresso regularmente</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn primary" id="closeHelpFooterBtn">Entendido!</button>
            </div>
        </div>
    </div>

    <!-- Credits Modal -->
    <div id="creditsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Cr√©ditos</h2>
                <button class="close-btn" id="closeCreditsBtn">√ó</button>
            </div>
            <div class="modal-body">
                <div class="credits-section">
                    <h3>üéÆ Desenvolvimento</h3>
                    <div class="credit-item">
                        <strong>Conceito e Design:</strong>
                        <p>Rising Star: Music Mogul</p>
                    </div>
                    <div class="credit-item">
                        <strong>Programa√ß√£o:</strong>
                        <p>Engine JavaScript/HTML5 personalizada</p>
                    </div>
                    <div class="credit-item">
                        <strong>Interface:</strong>
                        <p>Design responsivo com efeitos cinematogr√°ficos</p>
                    </div>
                </div>

                <div class="credits-section">
                    <h3>üé® Arte e Design</h3>
                    <div class="credit-item">
                        <strong>Logo e Identidade Visual:</strong>
                        <p>Design original com holofotes cinematogr√°ficos</p>
                    </div>
                    <div class="credit-item">
                        <strong>Efeitos Visuais:</strong>
                        <p>Sistema de ilumina√ß√£o din√¢mica CSS3</p>
                    </div>
                </div>

                <div class="credits-section">
                    <h3>ü§ñ Tecnologia</h3>
                    <div class="credit-item">
                        <strong>IA de Simula√ß√£o:</strong>
                        <p>Sistema avan√ßado de simula√ß√£o da ind√∫stria musical</p>
                    </div>
                    <div class="credit-item">
                        <strong>Engine de Dados:</strong>
                        <p>Gerenciamento local e em nuvem</p>
                    </div>
                </div>

                <div class="credits-section">
                    <h3>üéµ Inspira√ß√£o Musical</h3>
                    <div class="credit-item">
                        <strong>Baseado em:</strong>
                        <p>Hist√≥rias reais da ind√∫stria musical e mec√¢nicas de jogos de simula√ß√£o cl√°ssicos</p>
                    </div>
                </div>

                <div class="credits-section">
                    <h3>üôè Agradecimentos Especiais</h3>
                    <div class="credit-item">
                        <p>√Ä comunidade de desenvolvedores indie e a todos os m√∫sicos que inspiraram este projeto.</p>
                    </div>
                </div>

                <div class="version-info">
                    <p><strong>Vers√£o:</strong> 1.0.0 Beta</p>
                    <p><strong>Build:</strong> 2025.01</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn primary" id="closeCreditsFooterBtn">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Storage Info Modal -->
    <div id="storageModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Informa√ß√µes de Armazenamento</h2>
                <button class="close-btn" id="closeStorageBtn">√ó</button>
            </div>
            <div class="modal-body">
                <div class="storage-section">
                    <h3>üíæ Armazenamento Local</h3>
                    <div class="storage-info">
                        <div class="storage-item">
                            <span class="storage-label">Espa√ßo Usado:</span>
                            <span class="storage-value" id="usedStorage">Calculando...</span>
                        </div>
                        <div class="storage-item">
                            <span class="storage-label">Espa√ßo Dispon√≠vel:</span>
                            <span class="storage-value" id="availableStorage">Calculando...</span>
                        </div>
                        <div class="storage-item">
                            <span class="storage-label">Total de Saves:</span>
                            <span class="storage-value" id="totalSaves">0</span>
                        </div>
                    </div>
                </div>

                <div class="storage-section">
                    <h3>üîÑ Sincroniza√ß√£o</h3>
                    <div class="sync-info">
                        <div class="sync-status" id="modalSyncStatus">
                            <span class="status-indicator offline"></span>
                            <span>Modo Offline</span>
                        </div>
                        <p class="sync-description">
                            Seus dados s√£o salvos localmente no seu dispositivo. 
                            A sincroniza√ß√£o em nuvem estar√° dispon√≠vel em futuras atualiza√ß√µes.
                        </p>
                    </div>
                </div>

                <div class="storage-section">
                    <h3>‚ö†Ô∏è Gerenciamento de Dados</h3>
                    <div class="data-management">
                        <button class="btn secondary" id="exportDataBtn">
                            üì§ Exportar Dados
                        </button>
                        <button class="btn secondary" id="importDataBtn">
                            üì• Importar Dados
                        </button>
                        <button class="btn danger" id="clearDataBtn">
                            üóëÔ∏è Limpar Todos os Dados
                        </button>
                    </div>
                    <p class="warning-text">
                        ‚ö†Ô∏è Limpar dados remove permanentemente todos os saves e configura√ß√µes.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn primary" id="closeStorageFooterBtn">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Character Creation Screen -->
    <div id="characterCreation" class="screen" style="display: none;">
        <div class="creation-container">
            <!-- Step 1: Profile (LAYOUT CORRIGIDO) -->
            <div id="profile-step" class="creation-step" style="display: flex; flex-direction: column; height: 100vh; max-height: 100vh; overflow: hidden; padding: 0; box-sizing: border-box;">
                <div class="step-header" style="flex-shrink: 0; padding: 16px 16px 8px; border-bottom: 1px solid rgba(255,255,255,0.1); position: relative;">
                    <button class="back-btn" id="profileBack" style="position: absolute; left: 16px; top: 16px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: #fff; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500; text-align: center; transition: all 0.3s ease; backdrop-filter: blur(5px);">Voltar</button>
                    <h1 class="step-title" style="margin: 0; font-size: 24px; font-weight: 700; color: #fff; text-align: center;">Perfil</h1>
                </div>

                <div class="profile-form" style="flex: 1; overflow-y: auto; overflow-x: hidden; padding: 16px; -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none;">
                    <!-- Nome do Personagem -->
                    <div class="form-section">
                        <label class="form-label">Nome do Personagem:</label>
                        <div class="name-inputs">
                            <input type="text" id="firstName" placeholder="Primeiro Nome" class="name-input" required>
                            <input type="text" id="lastName" placeholder="Sobrenome" class="name-input" required>
                        </div>
                    </div>

                    <!-- Nome Art√≠stico (OBRIGAT√ìRIO) -->
                    <div class="form-section">
                        <label class="form-label">Nome Art√≠stico:</label>
                        <input type="text" id="artistName" placeholder="Digite seu Nome Art√≠stico" class="artist-input" required>
                    </div>

                    <!-- Localiza√ß√£o -->
                    <div class="form-section">
                        <label class="form-label">Localiza√ß√£o:</label>
                        <div class="location-selector">
                            <button class="nav-arrow left" id="locationPrev">‚Äπ</button>
                            <span class="location-display" id="locationDisplay">Estados Unidos</span>
                            <span class="counter">1/9</span>
                            <button class="nav-arrow right" id="locationNext">‚Ä∫</button>
                        </div>
                    </div>

                    <!-- Idade (card largo) -->
                    <div class="form-section">
                        <label class="form-label">Idade:</label>
                        <div class="age-selector">
                            <button class="nav-arrow left" id="agePrev">‚Äπ</button>
                            <span class="age-display" id="ageDisplay">18</span>
                            <button class="nav-arrow right" id="ageNext">‚Ä∫</button>
                        </div>
                    </div>

                    <!-- Sexo (card largo) -->
                    <div class="form-section">
                        <label class="form-label">Sexo:</label>
                        <div class="sex-buttons">
                            <button class="sex-btn active" data-sex="male">Masculino</button>
                            <button class="sex-btn" data-sex="female">Feminino</button>
                        </div>
                    </div>

                    <!-- G√™nero Musical -->
                    <div class="form-section">
                        <label class="form-label">G√™nero Musical:</label>
                        <select class="genre-select" id="genreSelect" required>
                            <option value="afrobeat">Afrobeat</option>
                            <option value="alternative-country">Alternative Country</option>
                            <option value="alternative-metal">Alternative Metal</option>
                            <option value="alternative-pop">Alternative Pop</option>
                            <option value="alternative-rap">Alternative Rap</option>
                            <option value="alternative-rock">Alternative Rock</option>
                            <option value="ambient">Ambient</option>
                            <option value="art-rock">Art Rock</option>
                            <option value="blues">Blues</option>
                            <option value="brazilian-funk">Brazilian Funk</option>
                            <option value="christian">Christian</option>
                            <option value="classical">Classical</option>
                            <option value="country">Country</option>
                            <option value="dance-pop">Dance Pop</option>
                            <option value="edm">EDM</option>
                            <option value="electronic">Electronic</option>
                            <option value="electronica">Electronica</option>
                            <option value="folk">Folk</option>
                            <option value="gangsta-rap">Gangsta Rap</option>
                            <option value="gospel">Gospel</option>
                            <option value="hard-rock">Hard Rock</option>
                            <option value="house">House</option>
                            <option value="indie-pop">Indie Pop</option>
                            <option value="indie-rock">Indie Rock</option>
                            <option value="jpop">J-Pop</option>
                            <option value="jazz">Jazz</option>
                            <option value="kpop">K-Pop</option>
                            <option value="latin-pop">Latin Pop</option>
                            <option value="latin-rap">Latin Rap</option>
                            <option value="metal">Metal</option>
                            <option value="pop">Pop</option>
                            <option value="pop-country">Pop Country</option>
                            <option value="pop-punk">Pop Punk</option>
                            <option value="pop-rap">Pop Rap</option>
                            <option value="pop-rnb">Pop/R&B</option>
                            <option value="progressive-rock">Progressive Rock</option>
                            <option value="punk-rock">Punk Rock</option>
                            <option value="rnb" selected>R&B</option>
                            <option value="rap">Rap</option>
                            <option value="reggae">Reggae</option>
                            <option value="rock">Rock</option>
                            <option value="soft-rock">Soft Rock</option>
                            <option value="soul">Soul</option>
                            <option value="techno">Techno</option>
                            <option value="teen-pop">Teen Pop</option>
                        </select>
                    </div>

                    <!-- Fun√ß√£o/Papel -->
                    <div class="form-section">
                        <label class="form-label">Fun√ß√£o:</label>
                        <div class="role-selector">
                            <button class="nav-arrow left" id="rolePrev">‚Äπ</button>
                            <span class="role-display" id="roleDisplay">Cantor(a)</span>
                            <span class="counter">1/6</span>
                            <button class="nav-arrow right" id="roleNext">‚Ä∫</button>
                        </div>
                    </div>

                    <!-- Nome da Banda (OPCIONAL) -->
                    <div class="form-section optional band-section">
                        <label class="form-label">Nome da Banda <span class="optional-text">(opcional)</span>:</label>
                        <input type="text" id="bandName" placeholder="Nome da Banda" class="band-input">
                    </div>
                </div>
                
                <!-- Footer FIXO -->
                <div class="bottom-section" style="flex-shrink: 0; padding: 16px; border-top: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.3);">
                    <button class="continue-btn" id="profileContinue" style="width: 100%; padding: 12px 24px; background: linear-gradient(135deg, #ffd700, #daa520); border: none; color: #000; font-weight: 600; border-radius: 6px; cursor: pointer; font-size: 16px; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);">Continuar</button>
                </div>
            </div>

            <!-- CSS para profile scroll -->
            <style>
                .profile-form::-webkit-scrollbar {
                    display: none !important;
                }
            </style>

            <!-- Step 2: Background Story (LAYOUT CORRIGIDO) -->
            <div id="background-step" class="creation-step" style="display: none; flex-direction: column; height: 100vh; max-height: 100vh; overflow: hidden; padding: 0; box-sizing: border-box;">
                <div class="step-header" style="flex-shrink: 0; padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <h1 class="step-title" style="margin: 0; font-size: 24px; font-weight: 700; color: #fff; text-align: center;">Hist√≥ria de Fundo</h1>
                </div>

                <div class="profile-content" style="flex: 1; overflow-y: auto; overflow-x: hidden; padding: 16px; -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none;">
                    <!-- Sele√ß√£o de Hist√≥ria -->
                    <div class="form-section">
                        <label class="form-label">Selecionar Hist√≥ria:</label>
                        <div class="background-selector">
                            <select class="background-dropdown" id="backgroundSelect">
                                <option value="">Escolha uma hist√≥ria...</option>
                                <option value="0">Best Friend</option>
                                <option value="1">Indie Darlings</option>
                                <option value="2">Crossover Star</option>
                                <option value="3">Up and Coming Band</option>
                                <option value="4">Solo</option>
                                <option value="5">Local Scene Hero</option>
                                <option value="6">Band Member</option>
                                <option value="7">Indie Label</option>
                                <option value="8">Recording Studio</option>
                            </select>
                        </div>
                    </div>

                    <!-- Descri√ß√£o da Hist√≥ria -->
                    <div class="form-section">
                        <div class="background-description" id="backgroundDescription">
                            <p>Voc√™ e seu melhor amigo decidiram tentar fazer sucesso na ind√∫stria musical. Voc√™s n√£o t√™m certeza de como vai ser, mas j√° est√£o ouvindo coisas boas de amigos e fam√≠lia.</p>
                        </div>
                    </div>

                    <!-- Estat√≠sticas -->
                    <div class="form-section">
                        <div class="background-stats">
                            <div class="stat-row">
                                <span class="stat-label">Starting Label</span>
                                <span class="stat-value" id="startingLabel">Unsigned</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label">Starting Home</span>
                                <span class="stat-value" id="startingHome">Loft</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label">Starting Cash</span>
                                <span class="stat-value" id="startingCash">$15,000</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer FIXO -->
                <div class="bottom-section background-buttons" style="flex-shrink: 0; padding: 16px; border-top: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; gap: 16px; background: rgba(0,0,0,0.3);">
                    <button class="back-btn" id="backgroundBack" style="flex: 1; padding: 12px 24px; background: linear-gradient(135deg, #666666, #444444); border: none; color: #fff; font-weight: 600; border-radius: 6px; cursor: pointer; font-size: 16px; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(102, 102, 102, 0.3);">Voltar</button>
                    <button class="continue-btn" id="backgroundContinue" style="flex: 1; padding: 12px 24px; background: linear-gradient(135deg, #ffd700, #daa520); border: none; color: #000; font-weight: 600; border-radius: 6px; cursor: pointer; font-size: 16px; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);">Continuar</button>
                </div>
            </div>

            <!-- CSS para background scroll -->
            <style>
                .profile-content::-webkit-scrollbar {
                    display: none !important;
                }
                
                /* CSS MOBILE TOUCH FIX */
                button, .sex-btn, .continue-btn, .back-btn, .skill-btn {
                    -webkit-touch-callout: none !important;
                    -webkit-user-select: none !important;
                    user-select: none !important;
                    -webkit-tap-highlight-color: transparent !important;
                    touch-action: manipulation !important;
                    cursor: pointer !important;
                }
                
                /* Efeitos de toque para mobile */
                button:active, .sex-btn:active, .continue-btn:active, .back-btn:active, .skill-btn:active {
                    transform: scale(0.98) !important;
                    transition: transform 0.1s ease !important;
                }
                
                /* Garantir que bot√µes sejam clic√°veis no mobile */
                @media (max-width: 768px) {
                    button, .sex-btn, .continue-btn, .back-btn, .skill-btn {
                        min-height: 44px !important;
                        min-width: 44px !important;
                        position: relative !important;
                        z-index: 10 !important;
                    }
                    
                    /* GitHub Pages mobile fix */
                    .menu-btn {
                        pointer-events: auto !important;
                        -webkit-user-select: none !important;
                        user-select: none !important;
                    }
                }
                
                /* GitHub Pages specific fixes */
                * {
                    -webkit-tap-highlight-color: rgba(0,0,0,0) !important;
                }
            </style>

            <!-- Step 3: Skills (LAYOUT SCROLL FIXO) -->
            <div id="skills-step" class="creation-step" style="display: none; flex-direction: column; height: 100vh; max-height: 100vh; overflow: hidden;">
                <div class="skills-container" style="display: flex; flex-direction: column; height: 100%; overflow: hidden;">
                    
                    <!-- Header FIXO -->
                    <div class="step-header" style="flex-shrink: 0; padding: 20px 16px 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <h1 class="step-title" style="margin: 0 0 8px; font-size: 24px; font-weight: 700; color: #fff; text-align: center;">Distribuir Habilidades</h1>
                        <div class="character-info-mini" style="display: flex; flex-direction: column; gap: 2px; font-size: 12px; color: rgba(255,255,255,0.7); text-align: center;">
                            <span id="skillsCharacterName">Novo Artista</span>
                            <span id="skillsCharacterDetails">Cantor(a) ‚Ä¢ R&B</span>
                        </div>
                    </div>

                    <!-- Content com layout fixo -->
                    <div class="skills-content" style="flex: 1; display: flex; flex-direction: column; overflow: hidden; padding: 0;">
                        
                        <!-- Pontos dispon√≠veis - FIXO NO TOPO -->
                        <div class="points-section" style="flex-shrink: 0; padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <div class="points-card" style="background: rgba(224,123,229,0.1); border: 1px solid rgba(224,123,229,0.3); border-radius: 8px; padding: 16px; backdrop-filter: blur(10px); display: flex; justify-content: space-between; align-items: center;">
                                <span class="points-label" style="font-size: 14px; color: rgba(255,255,255,0.8); font-weight: 600;">Pontos Dispon√≠veis</span>
                                <span class="points-value" id="availablePoints" style="font-size: 24px; font-weight: 700; color: #e07be5;">100</span>
                            </div>
                            <p class="points-info" style="font-size: 12px; color: rgba(255,255,255,0.6); margin: 8px 0 0; text-align: center;">Distribua seus pontos entre as habilidades art√≠sticas</p>
                        </div>

                        <!-- CONTAINER SCROLL√ÅVEL INVIS√çVEL PARA AS HABILIDADES -->
                        <div class="skills-scroll-container" style="flex: 1; overflow-y: auto; overflow-x: hidden; padding: 0 16px 16px; -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none;">
                            <!-- APENAS TALENTOS ART√çSTICOS -->
                            <div class="skills-category">
                                <h3 class="category-title" style="font-size: 16px; color: #64a8ff; margin: 16px 0 12px; text-align: center;">üéµ TALENTOS ART√çSTICOS</h3>
                                
                                <div class="skill-row" data-skill="vocals">
                                    <div class="skill-info">
                                        <span class="skill-name">VOCALS</span>
                                        <span class="skill-description">Qualidade vocal e t√©cnica de canto</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">‚àí</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>

                                <div class="skill-row" data-skill="songWriting">
                                    <div class="skill-info">
                                        <span class="skill-name">SONG WRITING</span>
                                        <span class="skill-description">Cria√ß√£o e composi√ß√£o de m√∫sicas</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">‚àí</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>

                                <div class="skill-row" data-skill="rhythm">
                                    <div class="skill-info">
                                        <span class="skill-name">RHYTHM</span>
                                        <span class="skill-description">Senso de ritmo e timing musical</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">‚àí</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>

                                <div class="skill-row" data-skill="charisma">
                                    <div class="skill-info">
                                        <span class="skill-name">CHARISMA</span>
                                        <span class="skill-description">Carisma e presen√ßa de palco</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">‚àí</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>

                                <div class="skill-row" data-skill="virality">
                                    <div class="skill-info">
                                        <span class="skill-name">VIRALITY</span>
                                        <span class="skill-description">Capacidade de criar conte√∫do viral</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">‚àí</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>

                                <div class="skill-row" data-skill="videoDirecting">
                                    <div class="skill-info">
                                        <span class="skill-name">VIDEO DIRECTING</span>
                                        <span class="skill-description">Dire√ß√£o e produ√ß√£o de videoclipes</span>
                                    </div>
                                    <div class="skill-controls">
                                        <button class="skill-btn minus" type="button">‚àí</button>
                                        <span class="skill-value">1</span>
                                        <button class="skill-btn plus" type="button">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Footer FIXO -->
                    <div class="bottom-section background-buttons" style="flex-shrink: 0; padding: 16px; border-top: 1px solid rgba(255,255,255,0.1); display: flex; gap: 16px; background: rgba(0,0,0,0.3);">
                        <button class="back-btn" onclick="window.characterCreator?.previousStep()" style="width: calc(50% - 8px); padding: 12px 24px; background: linear-gradient(135deg, #666666, #444444); border: none; color: #fff; font-weight: 600; border-radius: 6px; cursor: pointer; font-size: 16px; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(102, 102, 102, 0.3);">Voltar</button>
                        <button class="continue-btn" id="startGameBtn" onclick="window.characterCreator?.startGame()" style="width: calc(50% - 8px); padding: 12px 24px; background: linear-gradient(135deg, #ffd700, #daa520); border: none; color: #000; font-weight: 600; border-radius: 6px; cursor: pointer; font-size: 16px; text-align: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);">Come√ßar Jogo</button>
                    </div>
                </div>
            </div>

            <!-- CSS para esconder scrollbar -->
            <style>
                .skills-scroll-container::-webkit-scrollbar {
                    display: none !important;
                }
                .skills-scroll-container {
                    scrollbar-width: none !important;
                    -ms-overflow-style: none !important;
                }
                
                /* CSS MOBILE TOUCH FIX PARA SKILLS */
                .skill-btn, .skill-btn.minus, .skill-btn.plus {
                    -webkit-touch-callout: none !important;
                    -webkit-user-select: none !important;
                    user-select: none !important;
                    -webkit-tap-highlight-color: transparent !important;
                    touch-action: manipulation !important;
                    cursor: pointer !important;
                    min-width: 44px !important;
                    min-height: 44px !important;
                    position: relative !important;
                    z-index: 10 !important;
                }
                
                .skill-btn:active {
                    transform: scale(0.95) !important;
                    transition: transform 0.1s ease !important;
                }
                
                /* Efeitos hover premium para bot√µes */
                .back-btn:hover {
                    background: rgba(255,255,255,0.2) !important;
                    border-color: rgba(255,255,255,0.4) !important;
                    transform: translateY(-1px) !important;
                }
                
                .continue-btn:hover {
                    background: linear-gradient(135deg, #ffdd33, #cc8800) !important;
                    transform: translateY(-1px) !important;
                    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4) !important;
                }
                
                .back-btn:active, .continue-btn:active {
                    transform: translateY(0) !important;
                }
            </style>
        </div>
    </div>

    <!-- Game Interface (Dashboard H√≠brido) -->
    <div id="gameInterface" class="screen" style="display: none;" data-guard="dashboard">
        <div class="app-shell hybrid">
            <aside class="side-panel" id="sideProfile">
                <div class="profile-header">
                    <div class="avatar-wrapper" id="sidebarAvatarWrapper">
                        <div class="new-avatar avatar-size-lg avatar-theme" id="newDesktopAvatar" title="Trocar Avatar">üéµ</div>
                        <button class="edit-avatar-btn" id="editAvatarBtn" title="Editar Avatar">‚úé</button>
                        <input type="file" id="avatarFileInput" accept="image/*" style="display:none;" />
                    </div>
                    <div class="artist-block">
                        <h2 id="artistStageName">DaVinci</h2>
                        <p class="artist-sub" id="artistRoleGenre">Rapper ‚Ä¢ R&B</p>
                        <span class="record-label" id="recordLabel" style="display: inline-block; background: linear-gradient(135deg, #ffd700, #daa520); color: #000; font-size: 10px; font-weight: 600; padding: 4px 10px; border-radius: 14px; margin: 8px 0 0; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);">Independent</span>
                    </div>
                </div>
                <div class="primary-stats">
                    <div class="p-stat">
                        <span class="label">üí∞ Cash</span>
                        <span class="val" id="statMoney">$0</span>
                    </div>
                    <div class="p-stat">
                        <span class="label">‚≠ê Fama</span>
                        <span class="val" id="statFame">0</span>
                    </div>
                    <div class="p-stat">
                        <span class="label">üë• Seguidores</span>
                        <span class="val" id="statListeners">0</span>
                    </div>
                    <div class="p-stat">
                        <span class="label">üî• Hype</span>
                        <span class="val" id="statHype">0</span>
                    </div>
                    <div class="p-stat">
                        <span class="label">üéØ N√≠vel</span>
                        <span class="val" id="statLevel">1</span>
                    </div>
                    <div class="p-stat">
                        <span class="label">‚ö° Energia</span>
                        <span class="val" id="statEnergy">100</span>
                    </div>
                </div>
                <div class="collapse-toggle" id="collapseProfile">Recolher ‚ñ≤</div>
            </aside>

            <div class="main-area">
                <!-- Card de Linha do Tempo -->
                <div class="time-card-container" style="padding: 16px; background: rgba(0,0,0,0.2); border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <div class="time-card" style="background: linear-gradient(135deg, #2a5298, #1e3a5f); padding: 16px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; color: #fff; box-shadow: 0 4px 15px rgba(42, 82, 152, 0.3);">
                        <div class="time-info">
                            <h3 style="margin: 0; font-size: 18px; font-weight: 600;">Semana 1 - Segunda-feira</h3>
                            <p style="margin: 4px 0 0; font-size: 14px; opacity: 0.8;">15 de Junho de 2024</p>
                        </div>
                        <button id="advanceTimeBtn" style="padding: 12px 24px; background: linear-gradient(135deg, #ffd700, #daa520); border: none; color: #000; font-weight: 600; border-radius: 8px; cursor: pointer; font-size: 16px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);">
                            End Week
                        </button>
                    </div>
                </div>

        <header class="top-bar" style="display: none;">
                    <div class="left">
                        <h1 class="view-title" id="currentViewTitle">Vis√£o Geral</h1>
                        <div class="time-chip">
                            <span id="weekIndicator">Semana 1</span>
                            <span id="dayIndicator">Segunda</span>
                        </div>
                    </div>
                    <div class="right">
                        <div class="level-chip">
                            <span id="careerLevelLabel">N√≠vel 1</span>
                            <div class="lvl-bar">
                                <div id="careerLevelFill" style="width:0%"></div>
                            </div>
                        </div>
                        <button class="settings-ingame-btn" id="openInGameSettings" title="Configura√ß√µes" style="background:none;border:1px solid rgba(255,255,255,0.25);color:#fff;padding:6px 10px;border-radius:6px;cursor:pointer;">‚öôÔ∏è</button>
                        <button class="settings-ingame-btn" id="openNotifications" title="Notifica√ß√µes" style="background:none;border:1px solid rgba(255,255,255,0.25);color:#fff;padding:6px 10px;border-radius:6px;cursor:pointer;">üîî</button>
                        <!-- Bot√£o Perfil removido: j√° existe aba dedicada -->
                    </div>
                </header>

                <!-- Perfil Inline Mobile -->
                <div class="inline-profile-bar" id="inlineProfileBar" style="display:none;">
                    <div class="avatar-wrapper">
                        <div class="new-avatar avatar-size-lg avatar-theme" id="newMobileAvatar" title="Trocar Avatar">üéµ</div>
                    </div>
                    <div class="inline-profile-meta">
                        <h2 id="artistStageNameInline" style="margin: 0; font-size: 18px; color: #fff;">DaVinci</h2>
                        <p id="artistRoleGenreInline" style="margin: 4px 0; font-size: 14px; color: #ccc;">Rapper ‚Ä¢ R&B</p>
                        <span class="record-label" id="recordLabelInline" style="display: inline-block; background: linear-gradient(135deg, #ffd700, #daa520); color: #000; font-size: 10px; font-weight: 600; padding: 3px 8px; border-radius: 12px; margin: 6px 0; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);">Independent</span>
                    </div>
                    <div class="inline-profile-stats">
                        <div class="p-stat"><span class="label">üí∞ Cash</span><span class="val" id="statMoneyInline">$0</span></div>
                        <div class="p-stat"><span class="label">‚≠ê Fama</span><span class="val" id="statFameInline">0</span></div>
                        <div class="p-stat"><span class="label">üë• Seg.</span><span class="val" id="statListenersInline">0</span></div>
                        <div class="p-stat"><span class="label">üî• Hype</span><span class="val" id="statHypeInline">0</span></div>
                        <div class="p-stat"><span class="label">üéØ N√≠vel</span><span class="val" id="statLevelInline">1</span></div>
                        <div class="p-stat"><span class="label">‚ö° Energia</span><span class="val" id="statEnergyInline">100</span></div>
                    </div>
                </div>

                <nav class="tab-nav" id="hubTabs">
                    <button class="tab-btn active" data-tab="profile">
                        <span class="tab-icon">üë§</span>
                        <span class="tab-label">Perfil</span>
                    </button>
                    <button class="tab-btn" data-tab="notifications">
                        <span class="tab-icon">üîî</span>
                        <span class="tab-label">Notifica√ß√µes</span>
                    </button>
                    <button class="tab-btn" data-tab="settings">
                        <span class="tab-icon">‚öôÔ∏è</span>
                        <span class="tab-label">Configura√ß√µes</span>
                    </button>
                    <button class="tab-btn" data-tab="store">
                        <span class="tab-icon">üõí</span>
                        <span class="tab-label">Loja</span>
                    </button>
                </nav>

                <main class="hub-panels" id="hubPanels">
                    <!-- Painel: Perfil Detalhado -->
                    <section class="hub-panel" id="panel-profile" data-tab="profile" style="display:block;">
                        <div class="profile-detailed" style="padding: 20px; max-width: 1200px; margin: 0 auto;">
                            <div class="profile-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                
                                <!-- Informa√ß√µes B√°sicas -->
                                <div class="info-card" style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 12px; color: #fff;">
                                    <h3 style="margin: 0 0 16px; font-size: 20px;">üìã Informa√ß√µes B√°sicas</h3>
                                    <div class="info-item"><strong>Nome:</strong> <span id="profileFullName">DaVinci Rodriguez</span></div>
                                    <div class="info-item"><strong>Nome Art√≠stico:</strong> <span id="profileStageName">DaVinci</span></div>
                                    <div class="info-item"><strong>G√™nero Musical:</strong> <span id="profileGenre">Rapper ‚Ä¢ R&B</span></div>
                                    <div class="info-item"><strong>Status:</strong> <span id="profileStatus">Artista Independente</span></div>
                                </div>

                                <!-- Estat√≠sticas Completas -->
                                <div class="stats-card" style="background: linear-gradient(135deg, #f093fb, #f5576c); padding: 20px; border-radius: 12px; color: #fff;">
                                    <h3 style="margin: 0 0 16px; font-size: 20px;">üìä Estat√≠sticas</h3>
                                    <div class="stat-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                        <div><strong>Fama:</strong> <span id="detailedFame">0</span></div>
                                        <div><strong>Popularidade:</strong> <span id="detailedPopularity">0</span></div>
                                        <div><strong>Reputa√ß√£o:</strong> <span id="detailedReputation">0</span></div>
                                        <div><strong>Seguidores:</strong> <span id="detailedFollowers">0</span></div>
                                    </div>
                                </div>

                                <!-- Habilidades Art√≠sticas -->
                                <div class="skills-card" style="background: linear-gradient(135deg, #4facfe, #00f2fe); padding: 20px; border-radius: 12px; color: #fff;">
                                    <h3 style="margin: 0 0 16px; font-size: 20px;">üéµ Habilidades Art√≠sticas</h3>
                                    <div class="skill-list">
                                        <div class="skill-item">VOCALS: <span id="skillVocals">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                        <div class="skill-item">SONGWRITING: <span id="skillSongwriting">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                        <div class="skill-item">RHYTHM: <span id="skillRhythm">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                        <div class="skill-item">CHARISMA: <span id="skillCharisma">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                        <div class="skill-item">VIRALITY: <span id="skillVirality">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                        <div class="skill-item">VIDEO DIRECTING: <span id="skillVideoDirecting">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                    </div>
                                </div>

                                <!-- Habilidades de Neg√≥cios -->
                                <div class="business-skills-card" style="background: linear-gradient(135deg, #fa709a, #fee140); padding: 20px; border-radius: 12px; color: #fff;">
                                    <h3 style="margin: 0 0 16px; font-size: 20px;">üíº Habilidades de Neg√≥cios</h3>
                                    <div class="skill-list">
                                        <div class="skill-item">LEADERSHIP: <span id="skillLeadership">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                        <div class="skill-item">MARKETING: <span id="skillMarketing">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                        <div class="skill-item">NEGOTIATION: <span id="skillNegotiation">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                        <div class="skill-item">RECRUITING: <span id="skillRecruiting">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                        <div class="skill-item">SALES: <span id="skillSales">1</span> <button class="upgrade-btn">‚¨ÜÔ∏è</button></div>
                                    </div>
                                </div>

                                <!-- Status de Vida -->
                                <div class="life-status-card" style="background: linear-gradient(135deg, #a8edea, #fed6e3); padding: 20px; border-radius: 12px; color: #333;">
                                    <h3 style="margin: 0 0 16px; font-size: 20px;">‚ù§Ô∏è Status de Vida</h3>
                                    <div class="status-list">
                                        <div class="status-item">HEALTH: <span id="statusHealth">100%</span></div>
                                        <div class="status-item">MOOD: <span id="statusMood">Feliz</span></div>
                                        <div class="status-item">RELATIONSHIPS: <span id="statusRelationships">Solteiro</span></div>
                                        <div class="status-item">RESIDENCE: <span id="statusResidence">Apartamento</span></div>
                                    </div>
                                </div>

                                <!-- Conquistas -->
                                <div class="achievements-card" style="background: linear-gradient(135deg, #ffecd2, #fcb69f); padding: 20px; border-radius: 12px; color: #333;">
                                    <h3 style="margin: 0 0 16px; font-size: 20px;">üèÜ Conquistas</h3>
                                    <div class="achievements-list" id="achievementsList">
                                        <div class="achievement-item">üéµ Primeira M√∫sica Gravada</div>
                                        <div class="achievement-item">üé§ Primeiro Show</div>
                                        <div class="achievement-item">üíø Primeiro √Ålbum</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Painel: Notifica√ß√µes -->
                    <section class="hub-panel" id="panel-notifications" data-tab="notifications" style="display: none;">
                        <div class="notifications-container" style="padding: 20px; max-width: 800px; margin: 0 auto;">
                            <h2 style="margin: 0 0 20px; color: #fff; text-align: center;">üîî Feed de Notifica√ß√µes</h2>
                            <div class="notifications-feed" id="notificationsFeed">
                                <div class="notification-item" style="background: rgba(255,255,255,0.1); padding: 16px; margin-bottom: 12px; border-radius: 8px; border-left: 4px solid #ffd700;">
                                    <h4 style="margin: 0 0 8px; color: #ffd700;">üè¢ Nova Mensagem de Gravadora</h4>
                                    <p style="margin: 0; color: #ccc;">Universal Music est√° interessada em seu trabalho.</p>
                                    <small style="color: #999;">H√° 2 horas</small>
                                </div>
                                <div class="notification-item" style="background: rgba(255,255,255,0.1); padding: 16px; margin-bottom: 12px; border-radius: 8px; border-left: 4px solid #00ff88;">
                                    <h4 style="margin: 0 0 8px; color: #00ff88;">üé™ Convite para Festival</h4>
                                    <p style="margin: 0; color: #ccc;">Voc√™ foi convidado para o Lollapalooza 2024.</p>
                                    <small style="color: #999;">Ontem</small>
                                </div>
                                <div class="notification-item" style="background: rgba(255,255,255,0.1); padding: 16px; margin-bottom: 12px; border-radius: 8px; border-left: 4px solid #ff6b35;">
                                    <h4 style="margin: 0 0 8px; color: #ff6b35;">üì∞ Billboard News</h4>
                                    <p style="margin: 0; color: #ccc;">Novos artistas de R&B est√£o dominando as paradas.</p>
                                    <small style="color: #999;">2 dias atr√°s</small>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Painel: Configura√ß√µes -->
                    <section class="hub-panel" id="panel-settings" data-tab="settings" style="display: none;">
                        <div class="settings-container" style="padding: 20px; max-width: 600px; margin: 0 auto;">
                            <h2 style="margin: 0 0 20px; color: #fff; text-align: center;">‚öôÔ∏è Configura√ß√µes do Jogo</h2>
                            <div class="settings-grid" style="display: grid; gap: 16px;">
                                <button class="settings-option" style="padding: 16px; background: rgba(255,255,255,0.1); border: none; border-radius: 8px; color: #fff; cursor: pointer;">
                                    üîä Configura√ß√µes de √Åudio
                                </button>
                                <button class="settings-option" style="padding: 16px; background: rgba(255,255,255,0.1); border: none; border-radius: 8px; color: #fff; cursor: pointer;">
                                    üé® Configura√ß√µes Visuais
                                </button>
                                <button class="settings-option" style="padding: 16px; background: rgba(255,255,255,0.1); border: none; border-radius: 8px; color: #fff; cursor: pointer;">
                                    üíæ Gerenciar Salvamentos
                                </button>
                                <button class="settings-option" style="padding: 16px; background: rgba(255,255,255,0.1); border: none; border-radius: 8px; color: #fff; cursor: pointer;">
                                    üåê Idioma
                                </button>
                            </div>
                        </div>
                    </section>

                    <!-- Painel: Loja -->
                    <section class="hub-panel" id="panel-store" data-tab="store" style="display: none;">
                        <div class="store-container" style="padding: 20px; max-width: 1000px; margin: 0 auto;">
                            <h2 style="margin: 0 0 20px; color: #fff; text-align: center;">üõí Loja/Marketplace</h2>
                            <div class="store-categories" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                                <div class="store-category" style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 12px; color: #fff; text-align: center;">
                                    <h3>üé§ Equipamentos</h3>
                                    <p>Microfones, instrumentos e equipamentos de est√∫dio</p>
                                    <button style="padding: 8px 16px; background: #fff; color: #333; border: none; border-radius: 6px; cursor: pointer;">Ver Itens</button>
                                </div>
                                <div class="store-category" style="background: linear-gradient(135deg, #f093fb, #f5576c); padding: 20px; border-radius: 12px; color: #fff; text-align: center;">
                                    <h3>üëï Roupas & Estilo</h3>
                                    <p>Roupas de palco e acess√≥rios para performances</p>
                                    <button style="padding: 8px 16px; background: #fff; color: #333; border: none; border-radius: 6px; cursor: pointer;">Ver Itens</button>
                                </div>
                                <div class="store-category" style="background: linear-gradient(135deg, #4facfe, #00f2fe); padding: 20px; border-radius: 12px; color: #fff; text-align: center;">
                                    <h3>üè† Propriedades</h3>
                                    <p>Casas, est√∫dios e espa√ßos para eventos</p>
                                    <button style="padding: 8px 16px; background: #fff; color: #333; border: none; border-radius: 6px; cursor: pointer;">Ver Itens</button>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>

                <footer class="mobile-bottom-nav" id="mobileNav">
                    <button data-view="home" class="m-btn active">
                        <span class="m-icon">üè†</span>
                        <span class="m-label">Home</span>
                    </button>
                    <button data-view="studio" class="m-btn">
                        <span class="m-icon">üéµ</span>
                        <span class="m-label">Studio</span>
                    </button>
                    <button data-view="career" class="m-btn">
                        <span class="m-icon">üèÜ</span>
                        <span class="m-label">Career</span>
                    </button>
                    <button data-view="social" class="m-btn">
                        <span class="m-icon">üí¨</span>
                        <span class="m-label">Social</span>
                    </button>
                    <button data-view="finance" class="m-btn">
                        <span class="m-icon">üí∞</span>
                        <span class="m-label">Finance</span>
                    </button>
                </footer>
            </div>
        </div>
        <div id="hubNotificationContainer" class="hub-toast-stack"></div>
    </div>

    <script type="module" src="js/ui/game-hub.js"></script>
    <script type="module" src="js/main.js?v=1.5.0"></script>
    <script type="module" src="js/core/ai-simulation.js?v=1.3.5"></script>
    <script type="module" src="js/core/data-manager.js?v=1.3.5"></script>
    <script type="module" src="js/ui/interface-manager.js?v=1.3.5"></script>
    <script type="module" src="js/ui/main-menu.js?v=1.3.5"></script>
    
    <!-- Estilos adicionais para o novo dashboard -->
    <style>
        /* Estilos para o card de tempo */
        .time-card-container {
            background: rgba(0,0,0,0.2);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .time-card {
            transition: all 0.3s ease;
        }
        
        .time-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(42, 82, 152, 0.4);
        }
        
        /* Estilos para informa√ß√µes do perfil */
        .record-label {
            display: inline-block;
            background: linear-gradient(135deg, #ffd700, #daa520);
            color: #000;
            font-size: 10px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 14px;
            margin: 8px 0 0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .record-label:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }
        
        /* Garantir que record-label aparece no mobile */
        #recordLabelInline {
            display: inline-block !important;
            visibility: visible !important;
        }
        
        /* Estilos para habilidades e upgrades */
        .skill-item, .status-item, .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .upgrade-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .upgrade-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        /* Responsividade para o card de tempo */
        @media (max-width: 768px) {
            .time-card {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }
            
            .time-info {
                text-align: center;
            }
            
            #advanceTimeBtn {
                width: 100%;
            }
        }
        /* Ajuste especial mobile (ex: 430x932): manter horizontal e reduzir dimens√µes */
        @media (max-width: 500px) {
            .time-card {
                flex-direction: row !important;
                align-items: center !important;
                text-align: left !important;
                gap: 12px !important;
                padding: 12px 14px !important; /* menor altura */
            }
            .time-info { text-align: left !important; flex: 1 1 auto !important; }
            .time-card h3 { font-size: 16px !important; line-height: 1.2 !important; }
            .time-card p { font-size: 12px !important; margin-top: 2px !important; }
            #advanceTimeBtn {
                width: auto !important;
                padding: 10px 18px !important;
                font-size: 14px !important;
                white-space: nowrap !important;
                flex-shrink: 0 !important;
            }
        }
        /* Ultra compacto: telas muito estreitas ainda podem empilhar para n√£o quebrar */
        @media (max-width: 350px) {
            .time-card { flex-direction: column !important; align-items: stretch !important; }
            #advanceTimeBtn { width: 100% !important; }
        }
        
        /* Avatar clic√°vel */
        .avatar {
            transition: all 0.3s ease;
        }
        
        .avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        
        /* Notifica√ß√µes */
        .notification-item {
            transition: all 0.3s ease;
        }
        
        .notification-item:hover {
            transform: translateX(8px);
            background: rgba(255,255,255,0.15) !important;
        }
        
        /* Cards do perfil detalhado */
        .info-card, .stats-card, .skills-card, .business-skills-card, 
        .life-status-card, .achievements-card {
            transition: all 0.3s ease;
        }
        
        .info-card:hover, .stats-card:hover, .skills-card:hover, 
        .business-skills-card:hover, .life-status-card:hover, .achievements-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
    </style>
    <script>
    // Sincroniza altura do avatar √† altura total do bloco (meta + stats) mantendo propor√ß√£o quadrada
    (function syncAvatarHeight(){
        const bar = document.getElementById('inlineProfileBar');
        if(!bar) return;
        const avatar = bar.querySelector('.avatar-wrapper .avatar');
        const meta = bar.querySelector('.inline-profile-meta');
        const stats = bar.querySelector('.inline-profile-stats');
        if(!avatar || !meta || !stats) return;
        function adjust(){
            // Altura alvo din√¢mica: maior entre meta e stats
            let target = Math.max(meta.offsetHeight, stats.offsetHeight);
            // Apenas limite m√≠nimo para n√£o ficar pequeno demais
            if (target < 60) target = 60;
            avatar.style.height = target + 'px';
            avatar.style.width = target + 'px';
        }
        const ro = new ResizeObserver(adjust);
        ro.observe(meta); ro.observe(stats); ro.observe(bar);
        window.addEventListener('orientationchange', ()=> setTimeout(adjust,120));
        window.addEventListener('resize', ()=> adjust());
        adjust();
    })();
    </script>
    
    <!-- Sidebar Card Style -->
    <style>
        .side-panel {
            margin: 16px 0 16px 16px !important;
            border-radius: 16px !important;
            background: rgba(255,255,255,0.05) !important;
            border: 1px solid rgba(255,255,255,0.1) !important;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3) !important;
        }
        
        /* Sidebar Mobile - Grid est√°vel: Avatar | Info | Stats (3x2) */
        .inline-profile-bar {
            margin: 16px !important;
            border-radius: 16px !important;
            background: rgba(255,255,255,0.05) !important;
            border: 1px solid rgba(255,255,255,0.1) !important;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3) !important;
            padding: 14px 14px 14px 11px !important; /* 1px mais √† esquerda */
            display: grid !important;
            grid-template-columns: auto minmax(100px, 140px) 1fr !important; /* reduz espa√ßo reservado */
            column-gap: 10px !important; /* aproxima colunas */
            align-items: start !important;
            box-sizing: border-box !important;
            max-width: 100% !important;
        }
        .inline-profile-bar .avatar-wrapper { grid-column:1; grid-row:1 / span 2; }
    .inline-profile-bar .avatar-wrapper .avatar { width:64px !important; height:64px !important; transition:height .15s ease, width .15s ease; }
    .inline-profile-bar .inline-profile-meta { grid-column:2; grid-row:1 / span 2; display:flex !important; flex-direction:column !important; gap:4px !important; min-width:0 !important; max-width:160px !important; }
    .inline-profile-bar .inline-profile-meta h2 { margin:0 !important; font-size:clamp(15px, 2.9vw, 18px) !important; line-height:1.15 !important; overflow-wrap:anywhere !important; }
    .inline-profile-bar .inline-profile-meta p { margin:0 !important; font-size:clamp(11px, 2.2vw, 14px) !important; line-height:1.1 !important; overflow-wrap:anywhere !important; }
        .inline-profile-bar .inline-profile-meta .record-label { margin-top:4px !important; font-size:9px !important; padding:3px 7px !important; }
    .inline-profile-bar > .inline-profile-stats { grid-column:3; grid-row:1 / span 2; }

        /* For√ßar distribui√ß√£o horizontal: avatar | meta | stats */
    .inline-profile-bar > .inline-profile-meta { min-width: 100px !important; }

        .inline-profile-bar > .inline-profile-stats {
            margin-left: auto !important;
        }

        /* Garantir alinhamento topo e n√£o empurrar stats para baixo */
        .inline-profile-bar .inline-profile-meta,
        .inline-profile-bar .inline-profile-stats {
            align-self: flex-start !important;
        }

        /* Avatar - lado esquerdo */
        .inline-profile-bar .avatar-wrapper {
            flex-shrink: 0 !important;
        }

        /* Nome e informa√ß√µes - meio */
        .inline-profile-bar .inline-profile-meta {
            flex: 1 !important;
            display: flex !important;
            flex-direction: column !important;
            gap: 4px !important;
        }

        .inline-profile-bar .inline-profile-meta h2 {
            margin: 0 !important;
            font-size: 18px !important;
            font-weight: 700 !important;
            color: #fff !important;
        }

        .inline-profile-bar .inline-profile-meta p {
            margin: 0 !important;
            font-size: 14px !important;
            color: rgba(255,255,255,0.8) !important;
        }

        .inline-profile-bar .inline-profile-meta .record-label {
            display: inline-block !important;
            background: linear-gradient(135deg, #ffd700, #daa520) !important;
            color: #000 !important;
            font-size: 10px !important;
            font-weight: 600 !important;
            padding: 3px 8px !important;
            border-radius: 12px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3) !important;
            align-self: flex-start !important;
            margin-top: 4px !important;
        }

        /* Stats 3x2 - lado direito alinhado */
        .inline-profile-stats {
            display: grid !important;
            grid-template-columns: repeat(3, minmax(0, 1fr)) !important; /* impede overflow horizontal */
            gap: 6px !important;
            width: 100% !important;
            margin: 0 !important;
            padding: 0 4px 0 0 !important; /* puxa levemente para esquerda */
        }

    .inline-profile-stats .p-stat { display:flex !important; flex-direction:column !important; align-items:center !important; text-align:center !important; gap:2px !important; padding:4px 2px !important; min-width:0 !important; box-sizing:border-box !important; }

        .inline-profile-stats .p-stat .label {
            font-size: 10px !important;
            color: rgba(255,255,255,0.6) !important;
            font-weight: 500 !important;
            line-height: 1 !important;
        }

        .inline-profile-stats .p-stat .val {
            font-size: 13px !important;
            color: #fff !important;
            font-weight: 700 !important;
            line-height: 1 !important;
        }

        /* Breakpoint at√© 640px mant√©m horizontal, ajusta apenas espa√ßamento */
        @media (max-width:640px) {
            .inline-profile-bar { grid-template-columns:auto minmax(115px,145px) 1fr !important; column-gap:8px !important; padding:12px 12px 12px 9px !important; }
            .inline-profile-bar .avatar-wrapper .avatar { width:60px !important; height:60px !important; }
            .inline-profile-stats { gap:5px !important; grid-template-columns:repeat(3, minmax(0,1fr)) !important; padding-right:2px !important; }
            .inline-profile-stats .p-stat { padding:3px 2px !important; min-width:0 !important; }
            .inline-profile-stats .p-stat .label { font-size:9px !important; }
            .inline-profile-stats .p-stat .val { font-size:12px !important; }
        }

        /* Ultra pequeno: <=360 empilha stats abaixo */
        @media (max-width:360px){
            .inline-profile-bar { grid-template-columns:auto 1fr !important; grid-auto-rows:auto !important; }
            .inline-profile-bar > .inline-profile-stats { grid-column:1 / -1; grid-row:3; margin-top:8px !important; grid-template-columns:repeat(3, minmax(0,1fr)) !important; }
        }

        /* Ajuste especial para aparelhos ~400-480px (ex: 430x932) manter layout horizontal */
        @media (min-width: 400px) and (max-width: 480px) {
            .inline-profile-bar { column-gap: 12px !important; padding: 12px 12px 12px 11px !important; }
            .inline-profile-bar .avatar-wrapper .avatar { width:60px !important; height:60px !important; }
            .inline-profile-bar .inline-profile-meta h2 { font-size:16px !important; }
            .inline-profile-bar .inline-profile-meta p { font-size:12px !important; }
            .inline-profile-bar > .inline-profile-stats { grid-template-columns: repeat(3, minmax(0, 1fr)) !important; gap:6px !important; }
            .inline-profile-bar .inline-profile-stats .p-stat { min-width:0 !important; padding:3px 4px !important; }
            .inline-profile-bar .inline-profile-stats .p-stat .label { font-size:9px !important; }
            .inline-profile-bar .inline-profile-stats .p-stat .val { font-size:12px !important; }
        }

        /* Desktop - manter sidebar principal e ocultar inline */
        @media (min-width: 1001px) {
            .inline-profile-bar {
                display: none !important;
            }
        }

        /* Mobile - ocultar sidebar principal e mostrar inline */
        @media (max-width: 1000px) {
            .side-panel { display: none !important; }
            .inline-profile-bar { display: flex !important; }
        }
    </style>
    
    <!-- Debug & In-Game Safe Area Handling -->
    <script>
        window.testDashboard = function() {
            console.log('üß™ Testando Dashboard...');
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('characterCreation').style.display = 'none';
            const dashboard = document.getElementById('gameInterface');
            if (dashboard) {
                dashboard.style.display = 'block';
                document.body.classList.add('in-game');
                if (typeof window.initGameHub === 'function') {
                    window.initGameHub();
                }
            }
        };
        console.log('üîß Digite window.testDashboard() no console para testar o dashboard');

        // Patch para marcar quando jogo inicia e revelar controles in-game-only
        (function patchInit() {
            if (window.__safeAreaInitPatched) return;
            const hook = () => {
                if (typeof window.initGameHub === 'function' && !window.__safeAreaInitPatched) {
                    window.__safeAreaInitPatched = true;
                    const original = window.initGameHub;
                    window.initGameHub = function(...args) {
                        const r = original.apply(this, args);
                        document.body.classList.add('in-game');
                        document.querySelectorAll('.in-game-only').forEach(el => {
                            el.style.display = '';
                        });
                        return r;
                    };
                } else if (!window.__safeAreaInitPatched) {
                    setTimeout(hook, 200);
                }
            };
            hook();
        })();

        // Abrir configura√ß√µes por bot√£o in-game (delegado, chama m√©todo oficial se dispon√≠vel)
        document.addEventListener('click', (e) => {
            if (e.target && e.target.id === 'openInGameSettings') {
                e.preventDefault();
                e.stopPropagation();
                if (window.mainMenu && typeof window.mainMenu.showSettings === 'function') {
                    window.mainMenu.showSettings();
                } else {
                    const modal = document.getElementById('settingsModal');
                    if (modal) {
                        modal.style.display = 'flex';
                        modal.classList.add('show');
                    }
                }
            }
        });

        // Impedir clique dentro do modal de vazar para o dashboard (usar fase de bolha para n√£o bloquear handlers dos bot√µes)
        document.addEventListener('click', (e) => {
            const mc = e.target.closest('.modal-content');
            if (mc) {
                // J√° deixa bot√µes funcionarem (handlers rodam antes desta etapa)
                e.stopPropagation();
            }
        });

        // Fallback / refor√ßo para bot√µes do modal caso alguma liga√ß√£o inicial falhe ou modal seja aberto antes do MainMenu bindEvents
        document.addEventListener('click', (e) => {
            const id = e.target && e.target.id;
            if (!id) return;
            if (id === 'closeSettingsBtn') {
                e.preventDefault();
                if (window.mainMenu?.hideSettings) {
                    window.mainMenu.hideSettings();
                } else {
                    const modal = document.getElementById('settingsModal');
                    if (modal) { modal.classList.remove('show'); setTimeout(()=> modal.style.display='none', 200); }
                }
            } else if (id === 'saveSettingsBtn') {
                e.preventDefault();
                if (window.mainMenu?.saveSettings) {
                    window.mainMenu.saveSettings(); // j√° fecha dentro de saveSettings()
                } else {
                    // Fallback m√≠nimo: apenas fechar modal
                    const modal = document.getElementById('settingsModal');
                    if (modal) { modal.classList.remove('show'); setTimeout(()=> modal.style.display='none', 200); }
                }
            } else if (id === 'resetSettingsBtn') {
                e.preventDefault();
                if (window.mainMenu?.resetSettings) {
                    window.mainMenu.resetSettings();
                } else {
                    // Reset simples fallback (limpa localStorage e recarrega)
                    try { localStorage.removeItem('risingstar_settings'); } catch(_) {}
                    location.reload();
                }
            }
        });

        // Fechar modal ao clicar fora (overlay)
        document.addEventListener('click', (e) => {
            const anyOpen = document.querySelector('.modal.show');
            if (anyOpen && e.target.classList && e.target.classList.contains('modal')) {
                if (window.mainMenu && typeof window.mainMenu.hideSettings === 'function') {
                    window.mainMenu.hideSettings();
                } else {
                    anyOpen.classList.remove('show');
                    setTimeout(()=> anyOpen.style.display = 'none', 250);
                }
            }
        });
    </script>
    
    <!-- Initialize Character Creator globally -->
    <script type="module">
        // Debug information
        console.log('üåç Environment Info:');
        console.log('- Hostname:', window.location.hostname);
        console.log('- Pathname:', window.location.pathname);
        console.log('- Full URL:', window.location.href);
        console.log('- User Agent:', navigator.userAgent);
        
        // GitHub Pages compatible import
        const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        const isGitHubPages = window.location.hostname.includes('github.io');
        
        let basePath = './';
        if (isGitHubPages) {
            basePath = '/rising-star-music-mogul/';
        }
        
        console.log('üîß Base path determined:', basePath);
        console.log('üìç Is Local:', isLocal, '| Is GitHub Pages:', isGitHubPages);
        
        // Try multiple import strategies
        async function loadCharacterCreator() {
            const attempts = [
                `${basePath}js/ui/character-creator.js`,
                './js/ui/character-creator.js',
                'js/ui/character-creator.js'
            ];
            
            for (let i = 0; i < attempts.length; i++) {
                try {
                    console.log(`üîÑ Attempt ${i + 1}: Loading from ${attempts[i]}`);
                    const module = await import(attempts[i]);
                    const { CharacterCreator } = module;
                    
                    console.log('‚úÖ CharacterCreator loaded successfully!');
                    
                    // Initialize when DOM is ready
                    if (document.readyState === 'loading') {
                        document.addEventListener('DOMContentLoaded', initCharacterCreator);
                    } else {
                        initCharacterCreator();
                    }
                    
                    function initCharacterCreator() {
                        console.log('üé≠ Initializing CharacterCreator...');
                        if (window.characterCreator) {
                            console.log('‚ÑπÔ∏è CharacterCreator already initialized - skipping duplicate init:', window.characterCreator);
                            return;
                        }

                        // Prefer passing existing game engine if available
                        try {
                            const engine = window.game || null;
                            window.characterCreator = new CharacterCreator(engine);
                            console.log('‚úÖ Global CharacterCreator initialized:', window.characterCreator);

                            // Test if it's working
                            if (typeof window.characterCreator.show === 'function') {
                                console.log('‚úÖ CharacterCreator methods available');
                            } else {
                                console.error('‚ùå CharacterCreator methods not available');
                            }
                        } catch (err) {
                            console.error('‚ùå Failed to initialize CharacterCreator:', err);
                        }
                    }
                    
                    return; // Success, exit function
                    
                } catch (error) {
                    console.warn(`‚ùå Attempt ${i + 1} failed:`, error.message);
                    if (i === attempts.length - 1) {
                        console.error('‚ùå All attempts failed to load CharacterCreator');
                        console.error('üîç Final error:', error);
                    }
                }
            }
        }
        
        // Start loading
        loadCharacterCreator();
    </script>

    <script>
        // Force start button handler (debug)
        document.addEventListener('DOMContentLoaded', () => {
            const btn = document.getElementById('forceStartBtn');
            if (!btn) return;
            btn.addEventListener('click', () => {
                console.log('üõ†Ô∏è Force Start button clicked');
                const ls = document.getElementById('loadingScreen');
                if (ls) ls.style.display = 'none';
                try {
                    if (window.game && typeof window.game.showMainMenu === 'function') {
                        window.game.showMainMenu();
                    } else {
                        const mm = document.getElementById('mainMenu');
                        if (mm) mm.style.display = 'block';
                    }
                } catch (err) {
                    console.error('‚ùå ForceStart error:', err);
                }
            });
        });
    </script>

        <!-- Dynamic VH fallback for mobile browsers (evita corte por barras de endere√ßo) -->
        <script>
            (function() {
                function applyDynamicVH() {
                    const vh = window.innerHeight * 0.01;
                    document.documentElement.style.setProperty('--vh', vh + 'px');
                    const steps = document.querySelectorAll('#characterCreation .creation-step');
                    steps.forEach(step => {
                        // Usa a vari√°vel din√¢mica; se n√£o existir, fallback normal do navegador
                        step.style.height = 'calc(var(--vh, 1vh) * 100)';
                        step.style.maxHeight = 'calc(var(--vh, 1vh) * 100)';
                    });
                }

                let resizeTimeout;
                function schedule() {
                    clearTimeout(resizeTimeout);
                        resizeTimeout = setTimeout(applyDynamicVH, 60);
                }

                window.addEventListener('resize', schedule, { passive: true });
                window.addEventListener('orientationchange', () => setTimeout(applyDynamicVH, 120));
                document.addEventListener('visibilitychange', () => { if (!document.hidden) schedule(); });
                // Primeira aplica√ß√£o assim que poss√≠vel
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', applyDynamicVH);
                } else {
                    applyDynamicVH();
                }
            })();
        </script>
     <script>
        // Guarda final: n√£o permitir dashboard vis√≠vel antes do jogo
        (function finalDashboardGuard(){
            const gi = document.getElementById('gameInterface');
            if (!gi) return;
            if (!window.game || window.game.gameState !== 'playing') {
                gi.style.display = 'none';
            }
            document.addEventListener('readystatechange', ()=>{
                if (!window.game || window.game.gameState !== 'playing') gi.style.display='none';
            });
        })();
     </script>
</body>
</html>
